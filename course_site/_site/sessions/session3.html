<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-10-09">

<title>Session 3: Hands-on Python for Geospatial Data – CopPhil EO AI/ML Training - Day 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-c9822816d3895e59fda95a6fa7545fef.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-4a074efccdeff27617fbc72d37c1244e.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-c9822816d3895e59fda95a6fa7545fef.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-863aa4d8cd7d47b2ea71a40f543e327a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-6c7212b2519dd7bebfa1236c409c2f09.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-863aa4d8cd7d47b2ea71a40f543e327a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../styles/custom.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">CopPhil EO AI/ML Training - Day 1</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sessions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Sessions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sessions">    
        <li>
    <a class="dropdown-item" href="../sessions/session1.html">
 <span class="dropdown-text">Session 1: Copernicus &amp; Philippine EO</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/session2.html">
 <span class="dropdown-text">Session 2: AI/ML Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/session3.html">
 <span class="dropdown-text">Session 3: Python for Geospatial</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/session4.html">
 <span class="dropdown-text">Session 4: Google Earth Engine</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="../resources/setup.html">
 <span class="dropdown-text">Setup Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../resources/philippine-eo.html">
 <span class="dropdown-text">Philippine EO Links</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../resources/cheatsheets.html">
 <span class="dropdown-text">Cheat Sheets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../resources/faq.html">
 <span class="dropdown-text">FAQ</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../resources/glossary.html">
 <span class="dropdown-text">Glossary</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/copphil-training"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources/downloads.html"> <i class="bi bi-download" role="img">
</i> 
<span class="menu-text">Materials</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../sessions/session1.html">Training Sessions</a></li><li class="breadcrumb-item"><a href="../sessions/session3.html">Session 3: Hands-on Python for Geospatial Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to Day 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup Guide</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Training Sessions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sessions/session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 1: Copernicus Sentinel Data Deep Dive &amp; Philippine EO Ecosystem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sessions/session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 2: Core Concepts of AI/ML for Earth Observation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sessions/session3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Session 3: Hands-on Python for Geospatial Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sessions/session4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 4: Introduction to Google Earth Engine</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/philippine-eo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Philippine EO Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/cheatsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cheat Sheets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/downloads.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Downloads</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequently Asked Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">On This Page</h2>
   
  <ul>
  <li><a href="#session-overview" id="toc-session-overview" class="nav-link active" data-scroll-target="#session-overview">Session Overview</a>
  <ul class="collapse">
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning Objectives</a></li>
  </ul></li>
  <li><a href="#part-1-setting-up-google-colaboratory" id="toc-part-1-setting-up-google-colaboratory" class="nav-link" data-scroll-target="#part-1-setting-up-google-colaboratory">Part 1: Setting Up Google Colaboratory</a>
  <ul class="collapse">
  <li><a href="#what-is-google-colab" id="toc-what-is-google-colab" class="nav-link" data-scroll-target="#what-is-google-colab">What is Google Colab?</a></li>
  <li><a href="#creating-your-first-colab-notebook" id="toc-creating-your-first-colab-notebook" class="nav-link" data-scroll-target="#creating-your-first-colab-notebook">Creating Your First Colab Notebook</a></li>
  <li><a href="#understanding-the-colab-interface" id="toc-understanding-the-colab-interface" class="nav-link" data-scroll-target="#understanding-the-colab-interface">Understanding the Colab Interface</a></li>
  <li><a href="#connecting-google-drive" id="toc-connecting-google-drive" class="nav-link" data-scroll-target="#connecting-google-drive">Connecting Google Drive</a></li>
  </ul></li>
  <li><a href="#part-2-installing-geospatial-libraries" id="toc-part-2-installing-geospatial-libraries" class="nav-link" data-scroll-target="#part-2-installing-geospatial-libraries">Part 2: Installing Geospatial Libraries</a>
  <ul class="collapse">
  <li><a href="#required-libraries" id="toc-required-libraries" class="nav-link" data-scroll-target="#required-libraries">Required Libraries</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#verify-installation" id="toc-verify-installation" class="nav-link" data-scroll-target="#verify-installation">Verify Installation</a></li>
  </ul></li>
  <li><a href="#part-3-python-basics-refresher" id="toc-part-3-python-basics-refresher" class="nav-link" data-scroll-target="#part-3-python-basics-refresher">Part 3: Python Basics Refresher</a>
  <ul class="collapse">
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data Types</a></li>
  <li><a href="#control-structures" id="toc-control-structures" class="nav-link" data-scroll-target="#control-structures">Control Structures</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  </ul></li>
  <li><a href="#part-4-vector-data-with-geopandas" id="toc-part-4-vector-data-with-geopandas" class="nav-link" data-scroll-target="#part-4-vector-data-with-geopandas">Part 4: Vector Data with GeoPandas</a>
  <ul class="collapse">
  <li><a href="#what-is-vector-data" id="toc-what-is-vector-data" class="nav-link" data-scroll-target="#what-is-vector-data">What is Vector Data?</a></li>
  <li><a href="#loading-philippine-administrative-boundaries" id="toc-loading-philippine-administrative-boundaries" class="nav-link" data-scroll-target="#loading-philippine-administrative-boundaries">Loading Philippine Administrative Boundaries</a></li>
  <li><a href="#inspecting-a-geodataframe" id="toc-inspecting-a-geodataframe" class="nav-link" data-scroll-target="#inspecting-a-geodataframe">Inspecting a GeoDataFrame</a></li>
  <li><a href="#filtering-and-querying" id="toc-filtering-and-querying" class="nav-link" data-scroll-target="#filtering-and-querying">Filtering and Querying</a></li>
  <li><a href="#visualizing-vector-data" id="toc-visualizing-vector-data" class="nav-link" data-scroll-target="#visualizing-vector-data">Visualizing Vector Data</a></li>
  <li><a href="#example-create-area-of-interest-aoi" id="toc-example-create-area-of-interest-aoi" class="nav-link" data-scroll-target="#example-create-area-of-interest-aoi">Example: Create Area of Interest (AOI)</a></li>
  </ul></li>
  <li><a href="#part-5-raster-data-with-rasterio" id="toc-part-5-raster-data-with-rasterio" class="nav-link" data-scroll-target="#part-5-raster-data-with-rasterio">Part 5: Raster Data with Rasterio</a>
  <ul class="collapse">
  <li><a href="#what-is-raster-data" id="toc-what-is-raster-data" class="nav-link" data-scroll-target="#what-is-raster-data">What is Raster Data?</a></li>
  <li><a href="#opening-a-raster-file" id="toc-opening-a-raster-file" class="nav-link" data-scroll-target="#opening-a-raster-file">Opening a Raster File</a></li>
  <li><a href="#reading-raster-data-into-arrays" id="toc-reading-raster-data-into-arrays" class="nav-link" data-scroll-target="#reading-raster-data-into-arrays">Reading Raster Data into Arrays</a></li>
  <li><a href="#calculating-spectral-indices" id="toc-calculating-spectral-indices" class="nav-link" data-scroll-target="#calculating-spectral-indices">Calculating Spectral Indices</a></li>
  <li><a href="#creating-rgb-composites" id="toc-creating-rgb-composites" class="nav-link" data-scroll-target="#creating-rgb-composites">Creating RGB Composites</a></li>
  </ul></li>
  <li><a href="#part-6-combining-vector-and-raster-operations" id="toc-part-6-combining-vector-and-raster-operations" class="nav-link" data-scroll-target="#part-6-combining-vector-and-raster-operations">Part 6: Combining Vector and Raster Operations</a>
  <ul class="collapse">
  <li><a href="#clipping-raster-to-vector-boundary" id="toc-clipping-raster-to-vector-boundary" class="nav-link" data-scroll-target="#clipping-raster-to-vector-boundary">Clipping Raster to Vector Boundary</a></li>
  <li><a href="#sampling-raster-values-at-point-locations" id="toc-sampling-raster-values-at-point-locations" class="nav-link" data-scroll-target="#sampling-raster-values-at-point-locations">Sampling Raster Values at Point Locations</a></li>
  </ul></li>
  <li><a href="#part-7-complete-workflow-example" id="toc-part-7-complete-workflow-example" class="nav-link" data-scroll-target="#part-7-complete-workflow-example">Part 7: Complete Workflow Example</a>
  <ul class="collapse">
  <li><a href="#scenario-forest-health-assessment-in-philippine-protected-area" id="toc-scenario-forest-health-assessment-in-philippine-protected-area" class="nav-link" data-scroll-target="#scenario-forest-health-assessment-in-philippine-protected-area">Scenario: Forest Health Assessment in Philippine Protected Area</a></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key Takeaways</a></li>
  <li><a href="#practice-exercises" id="toc-practice-exercises" class="nav-link" data-scroll-target="#practice-exercises">Practice Exercises</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading">Further Reading</a>
  <ul class="collapse">
  <li><a href="#geopandas" id="toc-geopandas" class="nav-link" data-scroll-target="#geopandas">GeoPandas</a></li>
  <li><a href="#rasterio" id="toc-rasterio" class="nav-link" data-scroll-target="#rasterio">Rasterio</a></li>
  <li><a href="#combined-workflows" id="toc-combined-workflows" class="nav-link" data-scroll-target="#combined-workflows">Combined Workflows</a></li>
  </ul></li>
  <li><a href="#jupyter-notebook" id="toc-jupyter-notebook" class="nav-link" data-scroll-target="#jupyter-notebook">Jupyter Notebook</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../sessions/session1.html">Training Sessions</a></li><li class="breadcrumb-item"><a href="../sessions/session3.html">Session 3: Hands-on Python for Geospatial Data</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Session 3: Hands-on Python for Geospatial Data</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">Master vector and raster data processing with GeoPandas and Rasterio</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 9, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="session-info">
<p><strong>Duration:</strong> 2 hours | <strong>Format:</strong> Hands-on Coding | <strong>Platform:</strong> Google Colaboratory</p>
</div>
<section id="session-overview" class="level2">
<h2 class="anchored" data-anchor-id="session-overview">Session Overview</h2>
<p>This hands-on session teaches you how to work with geospatial data in Python - the foundation of Earth Observation workflows. You’ll use Google Colab (no installation needed!), learn vector data operations with GeoPandas, and master raster processing with Rasterio. By the end, you’ll be able to load Philippine administrative boundaries, visualize them, read Sentinel-2 imagery, calculate NDVI, and combine vector and raster operations.</p>
<section id="learning-objectives" class="level3 learning-objectives">
<h3 class="anchored" data-anchor-id="learning-objectives">Learning Objectives</h3>
<p>By the end of this session, you will be able to:</p>
<ul>
<li><strong>Set up</strong> Google Colaboratory for geospatial analysis</li>
<li><strong>Mount</strong> Google Drive for data access and storage</li>
<li><strong>Install</strong> Python geospatial libraries (GeoPandas, Rasterio)</li>
<li><strong>Read and inspect</strong> vector data (shapefiles, GeoJSON)</li>
<li><strong>Query and filter</strong> geospatial DataFrames</li>
<li><strong>Visualize</strong> vector data with maps</li>
<li><strong>Open and examine</strong> raster files and their metadata</li>
<li><strong>Read</strong> raster bands into NumPy arrays</li>
<li><strong>Calculate</strong> spectral indices (NDVI, NDWI)</li>
<li><strong>Create</strong> RGB composites from multispectral imagery</li>
<li><strong>Clip</strong> rasters to vector boundaries</li>
<li><strong>Combine</strong> vector and raster operations for analysis</li>
</ul>
</section>
<hr>
</section>
<section id="part-1-setting-up-google-colaboratory" class="level2">
<h2 class="anchored" data-anchor-id="part-1-setting-up-google-colaboratory">Part 1: Setting Up Google Colaboratory</h2>
<section id="what-is-google-colab" class="level3">
<h3 class="anchored" data-anchor-id="what-is-google-colab">What is Google Colab?</h3>
<p><strong>Google Colaboratory (Colab)</strong> is a free cloud-based Jupyter notebook environment that allows you to:</p>
<ul>
<li>Write and execute Python code in your browser</li>
<li>Access free GPU/TPU for machine learning</li>
<li>Collaborate with others in real-time</li>
<li>Save notebooks to Google Drive</li>
<li>No local installation required!</li>
</ul>
<p><strong>Perfect for this training:</strong> Everyone has the same environment, no dependency issues, accessible from anywhere.</p>
</section>
<section id="creating-your-first-colab-notebook" class="level3">
<h3 class="anchored" data-anchor-id="creating-your-first-colab-notebook">Creating Your First Colab Notebook</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Access Colab
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>URL:</strong> <a href="https://colab.research.google.com">https://colab.research.google.com</a></p>
<p><strong>Requirements:</strong> - Google account - Modern web browser (Chrome, Firefox, Safari, Edge) - Stable internet connection</p>
</div>
</div>
<p><strong>Steps:</strong></p>
<ol type="1">
<li>Go to colab.research.google.com</li>
<li>Sign in with your Google account</li>
<li>Click <strong>File → New Notebook</strong></li>
<li>Rename: <strong>File → Rename</strong> → “Day1_Session3_Geospatial_Python”</li>
</ol>
</section>
<section id="understanding-the-colab-interface" class="level3">
<h3 class="anchored" data-anchor-id="understanding-the-colab-interface">Understanding the Colab Interface</h3>
<p><strong>Key components:</strong></p>
<ul>
<li><strong>Code cells:</strong> Where you write Python code (click or press Enter to edit)</li>
<li><strong>Text cells:</strong> Markdown for documentation (Insert → Text cell)</li>
<li><strong>Run button:</strong> ▶ Execute current cell (or press Shift+Enter)</li>
<li><strong>Runtime menu:</strong> Manage execution environment</li>
<li><strong>Table of Contents:</strong> Navigate long notebooks (left sidebar icon)</li>
</ul>
<p><strong>Try it:</strong> Create a code cell and run:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Hello from Google Colab!"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"This is the CopPhil EO AI/ML Training"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Press <strong>Shift+Enter</strong> to execute. You should see the output below the cell.</p>
</section>
<section id="connecting-google-drive" class="level3">
<h3 class="anchored" data-anchor-id="connecting-google-drive">Connecting Google Drive</h3>
<p><strong>Why mount Google Drive?</strong></p>
<ul>
<li>Access data files stored in Drive</li>
<li>Save outputs permanently</li>
<li>Share data with collaborators</li>
</ul>
<p><strong>Mount Drive:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab <span class="im">import</span> drive</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>drive.mount(<span class="st">'/content/drive'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>What happens:</strong></p>
<ol type="1">
<li>Click the link that appears</li>
<li>Select your Google account</li>
<li>Click “Allow” to grant access</li>
<li>Copy the authorization code</li>
<li>Paste into the input field and press Enter</li>
</ol>
<p><strong>Verification:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>os.listdir(<span class="st">'/content/drive/MyDrive'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You should see your Google Drive folders listed!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Organizing Your Data
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a folder structure in Google Drive:</p>
<pre><code>MyDrive/
  CopPhil_Training/
    data/
      vector/          # Shapefiles, GeoJSON
      raster/          # Satellite imagery
    outputs/           # Processed results
    notebooks/         # Saved Colab notebooks</code></pre>
<p>This keeps your training materials organized.</p>
</div>
</div>
<hr>
</section>
</section>
<section id="part-2-installing-geospatial-libraries" class="level2">
<h2 class="anchored" data-anchor-id="part-2-installing-geospatial-libraries">Part 2: Installing Geospatial Libraries</h2>
<section id="required-libraries" class="level3">
<h3 class="anchored" data-anchor-id="required-libraries">Required Libraries</h3>
<p>Google Colab comes with many libraries pre-installed, but specialized geospatial tools need installation.</p>
<p><strong>Core libraries we’ll use:</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Library</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>GeoPandas</strong></td>
<td>Vector data (shapefiles, GeoJSON, polygons, points)</td>
</tr>
<tr class="even">
<td><strong>Rasterio</strong></td>
<td>Raster data (GeoTIFF, satellite imagery)</td>
</tr>
<tr class="odd">
<td><strong>Shapely</strong></td>
<td>Geometric operations (included with GeoPandas)</td>
</tr>
<tr class="even">
<td><strong>Matplotlib</strong></td>
<td>Visualization</td>
</tr>
<tr class="odd">
<td><strong>NumPy</strong></td>
<td>Array operations (pre-installed)</td>
</tr>
</tbody>
</table>
</section>
<section id="installation" class="level3">
<h3 class="anchored" data-anchor-id="installation">Installation</h3>
<p>Run this cell (may take 1-2 minutes):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install geospatial libraries</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install geopandas rasterio fiona shapely pyproj <span class="op">-</span>q</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Installation complete! ✓"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <code>-q</code> flag makes installation quiet (less output).</p>
<p><strong>If you see warnings:</strong> Usually safe to ignore. If errors occur, try:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">--</span>upgrade geopandas rasterio</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="verify-installation" class="level3">
<h3 class="anchored" data-anchor-id="verify-installation">Verify Installation</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.plot <span class="im">import</span> show</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ GeoPandas version:"</span>, gpd.__version__)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ Rasterio version:"</span>, rasterio.__version__)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ All libraries imported successfully!"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Runtime Restart
</div>
</div>
<div class="callout-body-container callout-body">
<p>Occasionally, Colab may ask you to restart the runtime after installing libraries:</p>
<p><strong>Runtime → Restart runtime</strong></p>
<p>Then re-run your import cell. This is normal!</p>
</div>
</div>
<hr>
</section>
</section>
<section id="part-3-python-basics-refresher" class="level2">
<h2 class="anchored" data-anchor-id="part-3-python-basics-refresher">Part 3: Python Basics Refresher</h2>
<p>Quick recap of Python essentials for geospatial work:</p>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data Types</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numbers</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>population <span class="op">=</span> <span class="dv">1780148</span>        <span class="co"># Integer</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>area_km2 <span class="op">=</span> <span class="fl">42.88</span>           <span class="co"># Float</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Strings</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Manila"</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>province <span class="op">=</span> <span class="st">"Metro Manila"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists (ordered collections)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>regions <span class="op">=</span> [<span class="st">"Luzon"</span>, <span class="st">"Visayas"</span>, <span class="st">"Mindanao"</span>]</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>coordinates <span class="op">=</span> [<span class="fl">14.5995</span>, <span class="fl">120.9842</span>]  <span class="co"># [latitude, longitude]</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Dictionaries (key-value pairs)</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>location_info <span class="op">=</span> {</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"city"</span>: <span class="st">"Quezon City"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"population"</span>: <span class="dv">2960048</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"region"</span>: <span class="st">"NCR"</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city<span class="sc">}</span><span class="ss"> has population </span><span class="sc">{</span>population<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Regions: </span><span class="sc">{</span>regions<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coordinates: </span><span class="sc">{</span>coordinates<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="control-structures" class="level3">
<h3 class="anchored" data-anchor-id="control-structures">Control Structures</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If statements</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>cloud_cover <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> cloud_cover <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Excellent"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> cloud_cover <span class="op">&lt;</span> <span class="dv">30</span>:</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Good"</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Poor"</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Cloud cover </span><span class="sc">{</span>cloud_cover<span class="sc">}</span><span class="ss">%: </span><span class="sc">{</span>quality<span class="sc">}</span><span class="ss"> for optical imagery"</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># For loops</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>provinces <span class="op">=</span> [<span class="st">"Palawan"</span>, <span class="st">"Zambales"</span>, <span class="st">"Quezon"</span>]</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> province <span class="kw">in</span> provinces:</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Processing </span><span class="sc">{</span>province<span class="sc">}</span><span class="ss">..."</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># List comprehension (Pythonic way)</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>province_lengths <span class="op">=</span> [<span class="bu">len</span>(p) <span class="cf">for</span> p <span class="kw">in</span> provinces]</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Province name lengths:"</span>, province_lengths)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="functions" class="level3">
<h3 class="anchored" data-anchor-id="functions">Functions</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_ndvi(nir, red):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate Normalized Difference Vegetation Index."""</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)  <span class="co"># Add small value to avoid division by zero</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ndvi</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>nir_value <span class="op">=</span> <span class="fl">0.8</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>red_value <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> calculate_ndvi(nir_value, red_value)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI: </span><span class="sc">{</span>result<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Key Python concepts for geospatial:</strong></p>
<ul>
<li><strong>Indentation matters:</strong> Use 4 spaces to define code blocks</li>
<li><strong>0-indexed:</strong> First element is <code>list[0]</code>, not <code>list[1]</code></li>
<li><strong>Method chaining:</strong> <code>gdf.filter(...).plot()</code></li>
<li><strong>Context managers:</strong> <code>with rasterio.open() as src:</code> (auto-cleanup)</li>
</ul>
<hr>
</section>
</section>
<section id="part-4-vector-data-with-geopandas" class="level2">
<h2 class="anchored" data-anchor-id="part-4-vector-data-with-geopandas">Part 4: Vector Data with GeoPandas</h2>
<section id="what-is-vector-data" class="level3">
<h3 class="anchored" data-anchor-id="what-is-vector-data">What is Vector Data?</h3>
<p><strong>Vector data represents discrete features:</strong></p>
<ul>
<li><strong>Points:</strong> Cities, field sites, observation locations</li>
<li><strong>Lines:</strong> Roads, rivers, transects</li>
<li><strong>Polygons:</strong> Administrative boundaries, land parcels, watersheds</li>
</ul>
<p><strong>Common formats:</strong> Shapefile (.shp), GeoJSON, KML, GeoPackage</p>
</section>
<section id="loading-philippine-administrative-boundaries" class="level3">
<h3 class="anchored" data-anchor-id="loading-philippine-administrative-boundaries">Loading Philippine Administrative Boundaries</h3>
<p>Let’s load provincial boundaries of the Philippines:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: From Google Drive (if you uploaded data)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>provinces <span class="op">=</span> gpd.read_file(<span class="st">'/content/drive/MyDrive/CopPhil_Training/data/vector/philippines_provinces.shp'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: From URL (using sample data)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/altcoder/philippines-json-maps/master/geojson/provinces/hires/BOHOL.json"</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>sample_province <span class="op">=</span> gpd.read_file(url)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># For this example, let's use the sample</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> sample_province</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Loaded successfully! ✓"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="philippine-context">
<p><strong>Philippine Geospatial Data Sources:</strong></p>
<ul>
<li><strong>NAMRIA Geoportal:</strong> Official administrative boundaries</li>
<li><strong>PhilGIS:</strong> Open-source Philippine GIS data</li>
<li><strong>GADM:</strong> Global administrative boundaries</li>
<li><strong>OpenStreetMap:</strong> Roads, buildings, POIs</li>
</ul>
<p>Download shapefiles and upload to your Google Drive for this session.</p>
</div>
</section>
<section id="inspecting-a-geodataframe" class="level3">
<h3 class="anchored" data-anchor-id="inspecting-a-geodataframe">Inspecting a GeoDataFrame</h3>
<p><strong>View first rows:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>gdf.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This shows: - Attribute columns (NAME, PROVINCE, REGION, etc.) - <strong>geometry column:</strong> The shapes themselves (Polygon or MultiPolygon)</p>
<p><strong>Check coordinate reference system:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CRS:"</span>, gdf.crs)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Common CRS values:</strong> - <code>EPSG:4326</code> - WGS84 latitude/longitude (geographic) - <code>EPSG:32651</code> - UTM Zone 51N (projected, meters) - <code>EPSG:3123</code> - PRS92 Philippines Zone III</p>
<p><strong>Get basic info:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of features: </span><span class="sc">{</span><span class="bu">len</span>(gdf)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Geometry type: </span><span class="sc">{</span>gdf<span class="sc">.</span>geometry<span class="sc">.</span><span class="bu">type</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Bounds: </span><span class="sc">{</span>gdf<span class="sc">.</span>total_bounds<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># [minx, miny, maxx, maxy]</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Columns: </span><span class="sc">{</span><span class="bu">list</span>(gdf.columns)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Summary statistics:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gdf.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="filtering-and-querying" class="level3">
<h3 class="anchored" data-anchor-id="filtering-and-querying">Filtering and Querying</h3>
<p><strong>Filter by attribute:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If using multi-province dataset:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># luzon_provinces = gdf[gdf['ISLAND'] == 'LUZON']</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by area (if area column exists)</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># large_provinces = gdf[gdf['AREA_KM2'] &gt; 5000]</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Select specific province by name</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> gdf[gdf[<span class="st">'NAME'</span>].<span class="bu">str</span>.contains(<span class="st">'Bohol'</span>, case<span class="op">=</span><span class="va">False</span>)]</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Selected: </span><span class="sc">{</span>target[<span class="st">'NAME'</span>]<span class="sc">.</span>values<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Spatial filtering:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if geometries are valid</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Valid geometries: </span><span class="sc">{</span>gdf<span class="sc">.</span>geometry<span class="sc">.</span>is_valid<span class="sc">.</span><span class="bu">all</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate centroids</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'centroid'</span>] <span class="op">=</span> gdf.geometry.centroid</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Centroid of first feature: </span><span class="sc">{</span>gdf[<span class="st">'centroid'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate area (will be in units of CRS - degrees for EPSG:4326)</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'area'</span>] <span class="op">=</span> gdf.geometry.area</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Areas: </span><span class="sc">{</span>gdf[<span class="st">'area'</span>]<span class="sc">.</span>head()<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Working with CRS
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>To project to meters for accurate area calculation:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reproject to UTM Zone 51N (appropriate for Philippines)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>gdf_utm <span class="op">=</span> gdf.to_crs(<span class="st">'EPSG:32651'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>gdf_utm[<span class="st">'area_km2'</span>] <span class="op">=</span> gdf_utm.geometry.area <span class="op">/</span> <span class="dv">1_000_000</span>  <span class="co"># Convert m² to km²</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Province area: </span><span class="sc">{</span>gdf_utm[<span class="st">'area_km2'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss"> km²"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</section>
<section id="visualizing-vector-data" class="level3">
<h3 class="anchored" data-anchor-id="visualizing-vector-data">Visualizing Vector Data</h3>
<p><strong>Simple plot:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>gdf.plot(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>), edgecolor<span class="op">=</span><span class="st">'black'</span>, facecolor<span class="op">=</span><span class="st">'lightblue'</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Bohol Province, Philippines"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Styled plot with colors:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have multiple provinces with a classification column:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># gdf.plot(column='REGION', legend=True, figsize=(10, 10),</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#          cmap='Set3', edgecolor='black', linewidth=0.5)</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.title("Philippines Provinces by Region")</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co"># For single feature, style it:</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'#90EE90'</span>, edgecolor<span class="op">=</span><span class="st">'darkgreen'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'centroid'</span>].plot(ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">'red'</span>, markersize<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Bohol Province with Centroid"</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Interactive exploration:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display attribute table interactively</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>gdf[[<span class="st">'NAME'</span>, <span class="st">'geometry'</span>]]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="example-create-area-of-interest-aoi" class="level3">
<h3 class="anchored" data-anchor-id="example-create-area-of-interest-aoi">Example: Create Area of Interest (AOI)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a simple polygon AOI (example coordinates)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> Polygon</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Bounding box coordinates (minx, miny, maxx, maxy)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>aoi_coords <span class="op">=</span> [</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">9.5</span>),   <span class="co"># Southwest corner</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">125.0</span>, <span class="fl">9.5</span>),   <span class="co"># Southeast corner</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">125.0</span>, <span class="fl">11.0</span>),  <span class="co"># Northeast corner</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">11.0</span>),  <span class="co"># Northwest corner</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">9.5</span>)    <span class="co"># Close polygon</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>aoi_polygon <span class="op">=</span> Polygon(aoi_coords)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>aoi_gdf <span class="op">=</span> gpd.GeoDataFrame([<span class="dv">1</span>], geometry<span class="op">=</span>[aoi_polygon], crs<span class="op">=</span><span class="st">'EPSG:4326'</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>aoi_gdf.columns <span class="op">=</span> [<span class="st">'id'</span>, <span class="st">'geometry'</span>]</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize AOI with province</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'lightgray'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>aoi_gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'none'</span>, edgecolor<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Province with Area of Interest (Red Box)"</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"AOI created successfully! ✓"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="part-5-raster-data-with-rasterio" class="level2">
<h2 class="anchored" data-anchor-id="part-5-raster-data-with-rasterio">Part 5: Raster Data with Rasterio</h2>
<section id="what-is-raster-data" class="level3">
<h3 class="anchored" data-anchor-id="what-is-raster-data">What is Raster Data?</h3>
<p><strong>Raster data is a grid of pixels (cells), each with a value:</strong></p>
<ul>
<li><strong>Satellite imagery:</strong> Each pixel = reflectance values</li>
<li><strong>DEMs:</strong> Each pixel = elevation</li>
<li><strong>Temperature maps:</strong> Each pixel = temperature value</li>
</ul>
<p><strong>Common formats:</strong> GeoTIFF (.tif), NetCDF (.nc), HDF (.hdf)</p>
<p><strong>Raster structure:</strong></p>
<pre><code>┌─────┬─────┬─────┬─────┐
│ 120 │ 130 │ 125 │ 118 │  ← Row 1
├─────┼─────┼─────┼─────┤
│ 115 │ 140 │ 135 │ 122 │  ← Row 2
├─────┼─────┼─────┼─────┤
│ 110 │ 125 │ 130 │ 119 │  ← Row 3
└─────┴─────┴─────┴─────┘
  Col1  Col2  Col3  Col4</code></pre>
<p>Each cell has: - <strong>Value:</strong> Reflectance, elevation, class, etc. - <strong>Location:</strong> Defined by geotransform + CRS - <strong>Size:</strong> Spatial resolution (e.g., 10m)</p>
</section>
<section id="opening-a-raster-file" class="level3">
<h3 class="anchored" data-anchor-id="opening-a-raster-file">Opening a Raster File</h3>
<p><strong>Example: Sentinel-2 imagery subset</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample raster path (adjust to your data)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>raster_path <span class="op">=</span> <span class="st">'/content/drive/MyDrive/CopPhil_Training/data/raster/sentinel2_bohol_subset.tif'</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For demonstration, we'll create sample raster metadata</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># In real workflow, you'd open your actual Sentinel-2 file</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open raster</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>src <span class="op">=</span> rasterio.<span class="bu">open</span>(raster_path)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View metadata</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Raster Metadata:"</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Width (pixels): </span><span class="sc">{</span>src<span class="sc">.</span>width<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Height (pixels): </span><span class="sc">{</span>src<span class="sc">.</span>height<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Number of bands: </span><span class="sc">{</span>src<span class="sc">.</span>count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Data type: </span><span class="sc">{</span>src<span class="sc">.</span>dtypes[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  CRS: </span><span class="sc">{</span>src<span class="sc">.</span>crs<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Bounds: </span><span class="sc">{</span>src<span class="sc">.</span>bounds<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Resolution: </span><span class="sc">{</span>src<span class="sc">.</span>res<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (x_res, y_res) in CRS units</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Nodata value: </span><span class="sc">{</span>src<span class="sc">.</span>nodata<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>src.close()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Raster Metadata Explanation
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>For a Sentinel-2 10m band over Bohol:</strong></p>
<ul>
<li><strong>Width/Height:</strong> 5000 x 5000 pixels → 50km x 50km area</li>
<li><strong>Bands:</strong> 4 (Blue, Green, Red, NIR if subset)</li>
<li><strong>Data type:</strong> uint16 (0-65535 range)</li>
<li><strong>CRS:</strong> EPSG:32651 (UTM Zone 51N)</li>
<li><strong>Resolution:</strong> (10.0, -10.0) meters (negative y = north-up)</li>
<li><strong>Nodata:</strong> 0 or 65535 (no valid data)</li>
</ul>
</div>
</div>
<p><strong>Better pattern: Context manager (auto-closes file)</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Opened: </span><span class="sc">{</span>src<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Bands: </span><span class="sc">{</span>src<span class="sc">.</span>count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Work with src here</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># File automatically closed after 'with' block</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="reading-raster-data-into-arrays" class="level3">
<h3 class="anchored" data-anchor-id="reading-raster-data-into-arrays">Reading Raster Data into Arrays</h3>
<p><strong>Read a single band:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read band 1 (Rasterio uses 1-indexing for bands)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    band1 <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Band 1 shape: </span><span class="sc">{</span>band1<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (height, width)</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Data type: </span><span class="sc">{</span>band1<span class="sc">.</span>dtype<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Min value: </span><span class="sc">{</span>band1<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss">, Max value: </span><span class="sc">{</span>band1<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean value: </span><span class="sc">{</span>band1<span class="sc">.</span>mean()<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Read multiple bands:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read all bands as 3D array (bands, height, width)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    all_bands <span class="op">=</span> src.read()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Or read specific bands</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    blue <span class="op">=</span> src.read(<span class="dv">1</span>)   <span class="co"># Band 1: Blue</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)  <span class="co"># Band 2: Green</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)    <span class="co"># Band 3: Red</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>)    <span class="co"># Band 4: NIR</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"All bands shape: </span><span class="sc">{</span>all_bands<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (4, height, width)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>For Sentinel-2, typical band order in L2A products:</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Band #</th>
<th>Wavelength</th>
<th>Name</th>
<th>Resolution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>490 nm</td>
<td>Blue (B2)</td>
<td>10m</td>
</tr>
<tr class="even">
<td>2</td>
<td>560 nm</td>
<td>Green (B3)</td>
<td>10m</td>
</tr>
<tr class="odd">
<td>3</td>
<td>665 nm</td>
<td>Red (B4)</td>
<td>10m</td>
</tr>
<tr class="even">
<td>4</td>
<td>842 nm</td>
<td>NIR (B8)</td>
<td>10m</td>
</tr>
</tbody>
</table>
</section>
<section id="calculating-spectral-indices" class="level3">
<h3 class="anchored" data-anchor-id="calculating-spectral-indices">Calculating Spectral Indices</h3>
<section id="ndvi-normalized-difference-vegetation-index" class="level4">
<h4 class="anchored" data-anchor-id="ndvi-normalized-difference-vegetation-index">NDVI (Normalized Difference Vegetation Index)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>).astype(<span class="bu">float</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>).astype(<span class="bu">float</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate NDVI</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># NDVI = (NIR - Red) / (NIR + Red)</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)  <span class="co"># Small value prevents division by zero</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI range: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.3f}</span><span class="ss"> to </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI mean: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize NDVI</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>plt.imshow(ndvi, cmap<span class="op">=</span><span class="st">'RdYlGn'</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>plt.colorbar(label<span class="op">=</span><span class="st">'NDVI'</span>, shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"NDVI - Vegetation Index"</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Column (pixels)"</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Row (pixels)"</span>)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>NDVI interpretation:</strong></p>
<ul>
<li><strong>&lt;0:</strong> Water, clouds, snow</li>
<li><strong>0-0.2:</strong> Bare soil, rock, sand, urban</li>
<li><strong>0.2-0.4:</strong> Sparse vegetation, grassland</li>
<li><strong>0.4-0.7:</strong> Moderate vegetation, cropland</li>
<li><strong>&gt;0.7:</strong> Dense vegetation, healthy forest</li>
</ul>
<div class="philippine-context">
<p><strong>Philippine Application: Rice Paddy Monitoring</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify rice paddies (moderate-high NDVI during growing season)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>rice_mask <span class="op">=</span> (ndvi <span class="op">&gt;</span> <span class="fl">0.5</span>) <span class="op">&amp;</span> (ndvi <span class="op">&lt;</span> <span class="fl">0.85</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.imshow(rice_mask, cmap<span class="op">=</span><span class="st">'Greens'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Potential Rice Paddies (NDVI 0.5-0.85)"</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>plt.colorbar()</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>rice_pixels <span class="op">=</span> rice_mask.<span class="bu">sum</span>()</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>total_pixels <span class="op">=</span> rice_mask.size</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Potential rice paddies: </span><span class="sc">{</span>rice_pixels<span class="sc">:,}</span><span class="ss"> pixels (</span><span class="sc">{</span>rice_pixels<span class="op">/</span>total_pixels<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="ndwi-normalized-difference-water-index" class="level4">
<h4 class="anchored" data-anchor-id="ndwi-normalized-difference-water-index">NDWI (Normalized Difference Water Index)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>).astype(<span class="bu">float</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>).astype(<span class="bu">float</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># NDWI = (Green - NIR) / (Green + NIR)</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>ndwi <span class="op">=</span> (green <span class="op">-</span> nir) <span class="op">/</span> (green <span class="op">+</span> nir <span class="op">+</span> <span class="fl">1e-10</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>plt.imshow(ndwi, cmap<span class="op">=</span><span class="st">'Blues'</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>plt.colorbar(label<span class="op">=</span><span class="st">'NDWI'</span>, shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"NDWI - Water Index"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract water bodies (NDWI &gt; 0.3)</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>water_mask <span class="op">=</span> ndwi <span class="op">&gt;</span> <span class="fl">0.3</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Water pixels: </span><span class="sc">{</span>water_mask<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">:,}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="creating-rgb-composites" class="level3">
<h3 class="anchored" data-anchor-id="creating-rgb-composites">Creating RGB Composites</h3>
<p><strong>True color composite (Red, Green, Blue):</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    blue <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack bands into RGB array</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>rgb <span class="op">=</span> np.stack([red, green, blue], axis<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale to 0-1 range for display (Sentinel-2 L2A is 0-10000)</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>rgb_scaled <span class="op">=</span> rgb.astype(<span class="bu">float</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>rgb_scaled <span class="op">=</span> np.clip(rgb_scaled, <span class="dv">0</span>, <span class="dv">1</span>)  <span class="co"># Clip any values outside 0-1</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhance contrast (optional)</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> skimage <span class="im">import</span> exposure</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>rgb_enhanced <span class="op">=</span> exposure.rescale_intensity(rgb_scaled, in_range<span class="op">=</span>(<span class="fl">0.0</span>, <span class="fl">0.3</span>), out_range<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>))</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>plt.imshow(rgb_enhanced)</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"True Color Composite (Red-Green-Blue)"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>False color composite (NIR, Red, Green) - highlights vegetation:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># NIR-R-G composite</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>false_color <span class="op">=</span> np.stack([nir, red, green], axis<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>false_color_scaled <span class="op">=</span> false_color.astype(<span class="bu">float</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>false_color_scaled <span class="op">=</span> np.clip(false_color_scaled, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>))</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>plt.imshow(false_color_scaled)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"False Color Composite (NIR-Red-Green) - Vegetation appears red"</span>)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Why false color?</strong></p>
<ul>
<li><strong>Vegetation:</strong> Appears bright red (high NIR reflectance)</li>
<li><strong>Water:</strong> Appears dark blue/black (absorbs NIR)</li>
<li><strong>Urban:</strong> Appears cyan/gray</li>
<li><strong>Bare soil:</strong> Appears brown/tan</li>
</ul>
<p>Easier to distinguish land cover types!</p>
<hr>
</section>
</section>
<section id="part-6-combining-vector-and-raster-operations" class="level2">
<h2 class="anchored" data-anchor-id="part-6-combining-vector-and-raster-operations">Part 6: Combining Vector and Raster Operations</h2>
<section id="clipping-raster-to-vector-boundary" class="level3">
<h3 class="anchored" data-anchor-id="clipping-raster-to-vector-boundary">Clipping Raster to Vector Boundary</h3>
<p><strong>Extract raster data only within AOI polygon:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.mask <span class="im">import</span> mask</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load AOI polygon (from earlier GeoPandas section)</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># aoi_gdf = ...</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ensure CRS match</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> aoi_gdf.crs <span class="op">!=</span> src.crs:</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        aoi_gdf <span class="op">=</span> aoi_gdf.to_crs(src.crs)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get geometries in proper format</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    shapes <span class="op">=</span> aoi_gdf.geometry.values</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Clip raster</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    out_image, out_transform <span class="op">=</span> mask(src, shapes, crop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    out_meta <span class="op">=</span> src.meta.copy()</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Update metadata for clipped raster</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>out_meta.update({</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"driver"</span>: <span class="st">"GTiff"</span>,</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"height"</span>: out_image.shape[<span class="dv">1</span>],</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"width"</span>: out_image.shape[<span class="dv">2</span>],</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"transform"</span>: out_transform</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Original raster: </span><span class="sc">{</span>src<span class="sc">.</span>width<span class="sc">}</span><span class="ss"> x </span><span class="sc">{</span>src<span class="sc">.</span>height<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Clipped raster: </span><span class="sc">{</span>out_meta[<span class="st">'width'</span>]<span class="sc">}</span><span class="ss"> x </span><span class="sc">{</span>out_meta[<span class="st">'height'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize clipped area</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">6</span>))</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Original</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].imshow(src.read(<span class="dv">3</span>), cmap<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Original Raster"</span>)</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Clipped</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].imshow(out_image[<span class="dv">2</span>], cmap<span class="op">=</span><span class="st">'gray'</span>)  <span class="co"># Band 3 (Red)</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Clipped to AOI"</span>)</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Save clipped raster:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> <span class="st">'/content/drive/MyDrive/CopPhil_Training/outputs/clipped_raster.tif'</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(output_path, <span class="st">'w'</span>, <span class="op">**</span>out_meta) <span class="im">as</span> dest:</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    dest.write(out_image)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"✓ Saved clipped raster to: </span><span class="sc">{</span>output_path<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="sampling-raster-values-at-point-locations" class="level3">
<h3 class="anchored" data-anchor-id="sampling-raster-values-at-point-locations">Sampling Raster Values at Point Locations</h3>
<p><strong>Extract pixel values at specific coordinates:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Field survey locations</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>survey_points <span class="op">=</span> gpd.GeoDataFrame({</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'site_id'</span>: [<span class="st">'Site_A'</span>, <span class="st">'Site_B'</span>, <span class="st">'Site_C'</span>],</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'geometry'</span>: gpd.points_from_xy([<span class="fl">124.0</span>, <span class="fl">124.5</span>, <span class="fl">123.8</span>], [<span class="fl">10.0</span>, <span class="fl">10.3</span>, <span class="fl">9.8</span>])</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>}, crs<span class="op">=</span><span class="st">'EPSG:4326'</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample raster at points</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reproject points if needed</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> survey_points.crs <span class="op">!=</span> src.crs:</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>        survey_points <span class="op">=</span> survey_points.to_crs(src.crs)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract coordinates</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    coords <span class="op">=</span> [(x, y) <span class="cf">for</span> x, y <span class="kw">in</span> <span class="bu">zip</span>(survey_points.geometry.x, survey_points.geometry.y)]</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample all bands</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    sampled_values <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> src.sample(coords)]</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to GeoDataFrame</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'blue'</span>] <span class="op">=</span> [v[<span class="dv">0</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'green'</span>] <span class="op">=</span> [v[<span class="dv">1</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'red'</span>] <span class="op">=</span> [v[<span class="dv">2</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'nir'</span>] <span class="op">=</span> [v[<span class="dv">3</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate NDVI at points</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'ndvi'</span>] <span class="op">=</span> (survey_points[<span class="st">'nir'</span>] <span class="op">-</span> survey_points[<span class="st">'red'</span>]) <span class="op">/</span> <span class="op">\</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>                        (survey_points[<span class="st">'nir'</span>] <span class="op">+</span> survey_points[<span class="st">'red'</span>])</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(survey_points[[<span class="st">'site_id'</span>, <span class="st">'ndvi'</span>]])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="part-7-complete-workflow-example" class="level2">
<h2 class="anchored" data-anchor-id="part-7-complete-workflow-example">Part 7: Complete Workflow Example</h2>
<section id="scenario-forest-health-assessment-in-philippine-protected-area" class="level3">
<h3 class="anchored" data-anchor-id="scenario-forest-health-assessment-in-philippine-protected-area">Scenario: Forest Health Assessment in Philippine Protected Area</h3>
<p><strong>Goal:</strong> Identify potential forest stress areas using Sentinel-2 NDVI</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Load protected area boundary</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (Replace with actual protected area shapefile)</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>protected_area <span class="op">=</span> aoi_gdf  <span class="co"># Using our AOI from earlier</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Load Sentinel-2 imagery</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Clip to protected area</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> protected_area.crs <span class="op">!=</span> src.crs:</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>        protected_area <span class="op">=</span> protected_area.to_crs(src.crs)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    shapes <span class="op">=</span> protected_area.geometry.values</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    out_image, out_transform <span class="op">=</span> mask(src, shapes, crop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract bands</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> out_image[<span class="dv">2</span>].astype(<span class="bu">float</span>)</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> out_image[<span class="dv">3</span>].astype(<span class="bu">float</span>)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Calculate NDVI</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Identify stress areas (low NDVI where forest expected)</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumption: Protected area should be &gt;0.6 NDVI (healthy forest)</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>stress_threshold <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>stress_mask <span class="op">=</span> (ndvi <span class="op">&lt;</span> stress_threshold) <span class="op">&amp;</span> (ndvi <span class="op">&gt;</span> <span class="fl">0.1</span>)  <span class="co"># Exclude water/bare</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Visualize results</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">6</span>))</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="co"># True color</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>rgb_display <span class="op">=</span> np.stack([red, green, blue], axis<span class="op">=</span><span class="dv">2</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>rgb_display <span class="op">=</span> np.clip(rgb_display, <span class="dv">0</span>, <span class="fl">0.3</span>) <span class="op">/</span> <span class="fl">0.3</span>  <span class="co"># Contrast stretch</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].imshow(rgb_display)</span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"True Color"</span>)</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a><span class="co"># NDVI</span></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>im1 <span class="op">=</span> axes[<span class="dv">1</span>].imshow(ndvi, cmap<span class="op">=</span><span class="st">'RdYlGn'</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"NDVI"</span>)</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>plt.colorbar(im1, ax<span class="op">=</span>axes[<span class="dv">1</span>], shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Stress areas</span></span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].imshow(stress_mask, cmap<span class="op">=</span><span class="st">'Reds'</span>)</span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="ss">f"Potential Stress Areas (NDVI &lt; </span><span class="sc">{</span>stress_threshold<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Statistics</span></span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a>total_pixels <span class="op">=</span> ndvi.size</span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>stress_pixels <span class="op">=</span> stress_mask.<span class="bu">sum</span>()</span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>area_m2 <span class="op">=</span> stress_pixels <span class="op">*</span> <span class="dv">100</span>  <span class="co"># 10m resolution → 100 m² per pixel</span></span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a>area_ha <span class="op">=</span> area_m2 <span class="op">/</span> <span class="dv">10000</span></span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"FOREST HEALTH ASSESSMENT RESULTS"</span>)</span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Protected Area: </span><span class="sc">{</span>protected_area[<span class="st">'id'</span>]<span class="sc">.</span>values[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average NDVI: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb36-61"><a href="#cb36-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress pixels: </span><span class="sc">{</span>stress_pixels<span class="sc">:,}</span><span class="ss"> (</span><span class="sc">{</span>stress_pixels<span class="op">/</span>total_pixels<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb36-62"><a href="#cb36-62" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress area: </span><span class="sc">{</span>area_ha<span class="sc">:.1f}</span><span class="ss"> hectares"</span>)</span>
<span id="cb36-63"><a href="#cb36-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="key-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways">Key Takeaways</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Session 3 Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Google Colab:</strong> - Cloud-based Python environment, no installation needed - Mount Google Drive for data access - Install geospatial libraries: <code>!pip install geopandas rasterio</code></p>
<p><strong>GeoPandas (Vector Data):</strong> - Read shapefiles/GeoJSON: <code>gpd.read_file()</code> - Filter by attributes: <code>gdf[gdf['column'] == value]</code> - Visualize: <code>gdf.plot()</code> - Check/transform CRS: <code>gdf.crs</code>, <code>gdf.to_crs()</code></p>
<p><strong>Rasterio (Raster Data):</strong> - Open rasters: <code>rasterio.open(path)</code> - Read bands: <code>src.read(band_number)</code> - Arrays are NumPy: all array operations work - Calculate indices: NDVI = <code>(NIR - Red) / (NIR + Red)</code></p>
<p><strong>Combining Vector + Raster:</strong> - Clip rasters: <code>rasterio.mask.mask(src, shapes, crop=True)</code> - Sample at points: <code>src.sample(coordinates)</code> - Match CRS before spatial operations!</p>
<p><strong>Next:</strong> Session 4 will leverage Google Earth Engine to access petabytes of Sentinel data without downloading!</p>
</div>
</div>
<hr>
</section>
<section id="practice-exercises" class="level2">
<h2 class="anchored" data-anchor-id="practice-exercises">Practice Exercises</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Try These Challenges
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Exercise 1: Load Your Own Boundary</strong></p>
<p>Download a shapefile of your province from NAMRIA Geoportal and visualize it in Colab.</p>
<p><strong>Exercise 2: Calculate NDWI</strong></p>
<p>Modify the NDVI code to calculate NDWI and identify water bodies in the imagery.</p>
<p><strong>Exercise 3: Multi-temporal NDVI</strong></p>
<p>If you have two Sentinel-2 images (dry season, wet season), calculate NDVI for both and create a change map.</p>
<p><strong>Exercise 4: Zonal Statistics</strong></p>
<p>Calculate average NDVI for each municipality using <code>rasterstats</code> library.</p>
<p><strong>Bonus: RGB Composite from GEE Export</strong></p>
<p>Export a Sentinel-2 composite from Google Earth Engine (Session 4) and visualize it using today’s techniques!</p>
</div>
</div>
<hr>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further Reading</h2>
<section id="geopandas" class="level3">
<h3 class="anchored" data-anchor-id="geopandas">GeoPandas</h3>
<ul>
<li><a href="https://geopandas.org/">Official Documentation</a></li>
<li><a href="https://www.datacamp.com/tutorial/geopandas-tutorial-geospatial-analysis">GeoPandas Tutorial (DataCamp)</a></li>
<li><a href="https://geopandas.org/en/stable/gallery/index.html">GeoPandas Examples Gallery</a></li>
</ul>
</section>
<section id="rasterio" class="level3">
<h3 class="anchored" data-anchor-id="rasterio">Rasterio</h3>
<ul>
<li><a href="https://rasterio.readthedocs.io/">Official Documentation</a></li>
<li><a href="https://rasterio.readthedocs.io/en/stable/quickstart.html">Rasterio Quickstart</a></li>
<li><a href="https://geoscripting-wur.github.io/PythonRaster/">Python Raster Tutorial (WUR)</a></li>
</ul>
</section>
<section id="combined-workflows" class="level3">
<h3 class="anchored" data-anchor-id="combined-workflows">Combined Workflows</h3>
<ul>
<li><a href="https://carpentries-incubator.github.io/geospatial-python/">Carpentries Geospatial Python</a></li>
<li><a href="https://rasterio.readthedocs.io/en/stable/topics/masking-by-shapefile.html">Cropping Rasters with Vector Boundaries</a></li>
</ul>
<hr>
</section>
</section>
<section id="jupyter-notebook" class="level2">
<h2 class="anchored" data-anchor-id="jupyter-notebook">Jupyter Notebook</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Access the Interactive Notebook
</div>
</div>
<div class="callout-body-container callout-body">
<p>A complete Jupyter notebook with all code examples from this session is available:</p>
<p><strong><a href="../notebooks/notebook1.html">Open Notebook 1: Python Geospatial Data →</a></strong></p>
<p>This notebook includes: - All code examples ready to run - Additional exercises - Sample datasets - Detailed comments and explanations</p>
</div>
</div>
<hr>
<div class="session-nav">
<div class="session-nav-link" href="session2.qmd">
<div class="session-nav-label">
<p>← Previous</p>
</div>
<div class="session-nav-title">
<p>Session 2: AI/ML Fundamentals</p>
</div>
</div>
<div class="session-nav-link" href="session4.qmd">
<div class="session-nav-label">
<p>Next Session</p>
</div>
<div class="session-nav-title">
<p>Session 4: Google Earth Engine →</p>
</div>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/YOUR_GITHUB_USERNAME\.github\.io\/ESAPhil");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="copphil-training/day1" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Session 3: Hands-on Python for Geospatial Data"</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Master vector and raster data processing with GeoPandas and Rasterio"</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>::: {.session-info}</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>**Duration:** 2 hours | **Format:** Hands-on Coding | **Platform:** Google Colaboratory</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="fu">## Session Overview</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>This hands-on session teaches you how to work with geospatial data in Python - the foundation of Earth Observation workflows. You'll use Google Colab (no installation needed!), learn vector data operations with GeoPandas, and master raster processing with Rasterio. By the end, you'll be able to load Philippine administrative boundaries, visualize them, read Sentinel-2 imagery, calculate NDVI, and combine vector and raster operations.</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>::: {.learning-objectives}</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="fu">### Learning Objectives</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>By the end of this session, you will be able to:</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Set up** Google Colaboratory for geospatial analysis</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Mount** Google Drive for data access and storage</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Install** Python geospatial libraries (GeoPandas, Rasterio)</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Read and inspect** vector data (shapefiles, GeoJSON)</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Query and filter** geospatial DataFrames</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Visualize** vector data with maps</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Open and examine** raster files and their metadata</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Read** raster bands into NumPy arrays</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Calculate** spectral indices (NDVI, NDWI)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Create** RGB composites from multispectral imagery</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Clip** rasters to vector boundaries</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Combine** vector and raster operations for analysis</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 1: Setting Up Google Colaboratory</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a><span class="fu">### What is Google Colab?</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>**Google Colaboratory (Colab)** is a free cloud-based Jupyter notebook environment that allows you to:</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Write and execute Python code in your browser</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Access free GPU/TPU for machine learning</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Collaborate with others in real-time</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Save notebooks to Google Drive</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>No local installation required!</span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>**Perfect for this training:** Everyone has the same environment, no dependency issues, accessible from anywhere.</span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a><span class="fu">### Creating Your First Colab Notebook</span></span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Access Colab</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>**URL:** <span class="co">[</span><span class="ot">https://colab.research.google.com</span><span class="co">](https://colab.research.google.com)</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>**Requirements:**</span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Google account</span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Modern web browser (Chrome, Firefox, Safari, Edge)</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Stable internet connection</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>**Steps:**</span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Go to colab.research.google.com</span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Sign in with your Google account</span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Click **File → New Notebook**</span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Rename: **File → Rename** → "Day1_Session3_Geospatial_Python"</span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a><span class="fu">### Understanding the Colab Interface</span></span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>**Key components:**</span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Code cells:** Where you write Python code (click or press Enter to edit)</span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Text cells:** Markdown for documentation (Insert → Text cell)</span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Run button:** ▶ Execute current cell (or press Shift+Enter)</span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Runtime menu:** Manage execution environment</span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Table of Contents:** Navigate long notebooks (left sidebar icon)</span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>**Try it:** Create a code cell and run:</span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Hello from Google Colab!"</span>)</span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"This is the CopPhil EO AI/ML Training"</span>)</span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a>Press **Shift+Enter** to execute. You should see the output below the cell.</span>
<span id="cb37-88"><a href="#cb37-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-89"><a href="#cb37-89" aria-hidden="true" tabindex="-1"></a><span class="fu">### Connecting Google Drive</span></span>
<span id="cb37-90"><a href="#cb37-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-91"><a href="#cb37-91" aria-hidden="true" tabindex="-1"></a>**Why mount Google Drive?**</span>
<span id="cb37-92"><a href="#cb37-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-93"><a href="#cb37-93" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Access data files stored in Drive</span>
<span id="cb37-94"><a href="#cb37-94" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Save outputs permanently</span>
<span id="cb37-95"><a href="#cb37-95" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Share data with collaborators</span>
<span id="cb37-96"><a href="#cb37-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-97"><a href="#cb37-97" aria-hidden="true" tabindex="-1"></a>**Mount Drive:**</span>
<span id="cb37-98"><a href="#cb37-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-99"><a href="#cb37-99" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-100"><a href="#cb37-100" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab <span class="im">import</span> drive</span>
<span id="cb37-101"><a href="#cb37-101" aria-hidden="true" tabindex="-1"></a>drive.mount(<span class="st">'/content/drive'</span>)</span>
<span id="cb37-102"><a href="#cb37-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-103"><a href="#cb37-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-104"><a href="#cb37-104" aria-hidden="true" tabindex="-1"></a>**What happens:**</span>
<span id="cb37-105"><a href="#cb37-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-106"><a href="#cb37-106" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Click the link that appears</span>
<span id="cb37-107"><a href="#cb37-107" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Select your Google account</span>
<span id="cb37-108"><a href="#cb37-108" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Click "Allow" to grant access</span>
<span id="cb37-109"><a href="#cb37-109" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Copy the authorization code</span>
<span id="cb37-110"><a href="#cb37-110" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Paste into the input field and press Enter</span>
<span id="cb37-111"><a href="#cb37-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-112"><a href="#cb37-112" aria-hidden="true" tabindex="-1"></a>**Verification:**</span>
<span id="cb37-113"><a href="#cb37-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-114"><a href="#cb37-114" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-115"><a href="#cb37-115" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb37-116"><a href="#cb37-116" aria-hidden="true" tabindex="-1"></a>os.listdir(<span class="st">'/content/drive/MyDrive'</span>)</span>
<span id="cb37-117"><a href="#cb37-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-118"><a href="#cb37-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-119"><a href="#cb37-119" aria-hidden="true" tabindex="-1"></a>You should see your Google Drive folders listed!</span>
<span id="cb37-120"><a href="#cb37-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-121"><a href="#cb37-121" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb37-122"><a href="#cb37-122" aria-hidden="true" tabindex="-1"></a><span class="fu">## Organizing Your Data</span></span>
<span id="cb37-123"><a href="#cb37-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-124"><a href="#cb37-124" aria-hidden="true" tabindex="-1"></a>Create a folder structure in Google Drive:</span>
<span id="cb37-125"><a href="#cb37-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-126"><a href="#cb37-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-127"><a href="#cb37-127" aria-hidden="true" tabindex="-1"></a><span class="in">MyDrive/</span></span>
<span id="cb37-128"><a href="#cb37-128" aria-hidden="true" tabindex="-1"></a><span class="in">  CopPhil_Training/</span></span>
<span id="cb37-129"><a href="#cb37-129" aria-hidden="true" tabindex="-1"></a><span class="in">    data/</span></span>
<span id="cb37-130"><a href="#cb37-130" aria-hidden="true" tabindex="-1"></a><span class="in">      vector/          # Shapefiles, GeoJSON</span></span>
<span id="cb37-131"><a href="#cb37-131" aria-hidden="true" tabindex="-1"></a><span class="in">      raster/          # Satellite imagery</span></span>
<span id="cb37-132"><a href="#cb37-132" aria-hidden="true" tabindex="-1"></a><span class="in">    outputs/           # Processed results</span></span>
<span id="cb37-133"><a href="#cb37-133" aria-hidden="true" tabindex="-1"></a><span class="in">    notebooks/         # Saved Colab notebooks</span></span>
<span id="cb37-134"><a href="#cb37-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-135"><a href="#cb37-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-136"><a href="#cb37-136" aria-hidden="true" tabindex="-1"></a>This keeps your training materials organized.</span>
<span id="cb37-137"><a href="#cb37-137" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-138"><a href="#cb37-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-139"><a href="#cb37-139" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-140"><a href="#cb37-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-141"><a href="#cb37-141" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 2: Installing Geospatial Libraries</span></span>
<span id="cb37-142"><a href="#cb37-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-143"><a href="#cb37-143" aria-hidden="true" tabindex="-1"></a><span class="fu">### Required Libraries</span></span>
<span id="cb37-144"><a href="#cb37-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-145"><a href="#cb37-145" aria-hidden="true" tabindex="-1"></a>Google Colab comes with many libraries pre-installed, but specialized geospatial tools need installation.</span>
<span id="cb37-146"><a href="#cb37-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-147"><a href="#cb37-147" aria-hidden="true" tabindex="-1"></a>**Core libraries we'll use:**</span>
<span id="cb37-148"><a href="#cb37-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-149"><a href="#cb37-149" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Library <span class="pp">|</span> Purpose <span class="pp">|</span></span>
<span id="cb37-150"><a href="#cb37-150" aria-hidden="true" tabindex="-1"></a><span class="pp">|---------|---------|</span></span>
<span id="cb37-151"><a href="#cb37-151" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **GeoPandas** <span class="pp">|</span> Vector data (shapefiles, GeoJSON, polygons, points) <span class="pp">|</span></span>
<span id="cb37-152"><a href="#cb37-152" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Rasterio** <span class="pp">|</span> Raster data (GeoTIFF, satellite imagery) <span class="pp">|</span></span>
<span id="cb37-153"><a href="#cb37-153" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Shapely** <span class="pp">|</span> Geometric operations (included with GeoPandas) <span class="pp">|</span></span>
<span id="cb37-154"><a href="#cb37-154" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Matplotlib** <span class="pp">|</span> Visualization <span class="pp">|</span></span>
<span id="cb37-155"><a href="#cb37-155" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **NumPy** <span class="pp">|</span> Array operations (pre-installed) <span class="pp">|</span></span>
<span id="cb37-156"><a href="#cb37-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-157"><a href="#cb37-157" aria-hidden="true" tabindex="-1"></a><span class="fu">### Installation</span></span>
<span id="cb37-158"><a href="#cb37-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-159"><a href="#cb37-159" aria-hidden="true" tabindex="-1"></a>Run this cell (may take 1-2 minutes):</span>
<span id="cb37-160"><a href="#cb37-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-161"><a href="#cb37-161" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-162"><a href="#cb37-162" aria-hidden="true" tabindex="-1"></a><span class="co"># Install geospatial libraries</span></span>
<span id="cb37-163"><a href="#cb37-163" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install geopandas rasterio fiona shapely pyproj <span class="op">-</span>q</span>
<span id="cb37-164"><a href="#cb37-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-165"><a href="#cb37-165" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Installation complete! ✓"</span>)</span>
<span id="cb37-166"><a href="#cb37-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-167"><a href="#cb37-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-168"><a href="#cb37-168" aria-hidden="true" tabindex="-1"></a>The <span class="in">`-q`</span> flag makes installation quiet (less output).</span>
<span id="cb37-169"><a href="#cb37-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-170"><a href="#cb37-170" aria-hidden="true" tabindex="-1"></a>**If you see warnings:** Usually safe to ignore. If errors occur, try:</span>
<span id="cb37-171"><a href="#cb37-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-172"><a href="#cb37-172" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-173"><a href="#cb37-173" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">--</span>upgrade geopandas rasterio</span>
<span id="cb37-174"><a href="#cb37-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-175"><a href="#cb37-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-176"><a href="#cb37-176" aria-hidden="true" tabindex="-1"></a><span class="fu">### Verify Installation</span></span>
<span id="cb37-177"><a href="#cb37-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-178"><a href="#cb37-178" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-179"><a href="#cb37-179" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb37-180"><a href="#cb37-180" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb37-181"><a href="#cb37-181" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.plot <span class="im">import</span> show</span>
<span id="cb37-182"><a href="#cb37-182" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb37-183"><a href="#cb37-183" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb37-184"><a href="#cb37-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-185"><a href="#cb37-185" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ GeoPandas version:"</span>, gpd.__version__)</span>
<span id="cb37-186"><a href="#cb37-186" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ Rasterio version:"</span>, rasterio.__version__)</span>
<span id="cb37-187"><a href="#cb37-187" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✓ All libraries imported successfully!"</span>)</span>
<span id="cb37-188"><a href="#cb37-188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-189"><a href="#cb37-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-190"><a href="#cb37-190" aria-hidden="true" tabindex="-1"></a>::: {.callout-warning}</span>
<span id="cb37-191"><a href="#cb37-191" aria-hidden="true" tabindex="-1"></a><span class="fu">## Runtime Restart</span></span>
<span id="cb37-192"><a href="#cb37-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-193"><a href="#cb37-193" aria-hidden="true" tabindex="-1"></a>Occasionally, Colab may ask you to restart the runtime after installing libraries:</span>
<span id="cb37-194"><a href="#cb37-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-195"><a href="#cb37-195" aria-hidden="true" tabindex="-1"></a>**Runtime → Restart runtime**</span>
<span id="cb37-196"><a href="#cb37-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-197"><a href="#cb37-197" aria-hidden="true" tabindex="-1"></a>Then re-run your import cell. This is normal!</span>
<span id="cb37-198"><a href="#cb37-198" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-199"><a href="#cb37-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-200"><a href="#cb37-200" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-201"><a href="#cb37-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-202"><a href="#cb37-202" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 3: Python Basics Refresher</span></span>
<span id="cb37-203"><a href="#cb37-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-204"><a href="#cb37-204" aria-hidden="true" tabindex="-1"></a>Quick recap of Python essentials for geospatial work:</span>
<span id="cb37-205"><a href="#cb37-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-206"><a href="#cb37-206" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Types</span></span>
<span id="cb37-207"><a href="#cb37-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-208"><a href="#cb37-208" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-209"><a href="#cb37-209" aria-hidden="true" tabindex="-1"></a><span class="co"># Numbers</span></span>
<span id="cb37-210"><a href="#cb37-210" aria-hidden="true" tabindex="-1"></a>population <span class="op">=</span> <span class="dv">1780148</span>        <span class="co"># Integer</span></span>
<span id="cb37-211"><a href="#cb37-211" aria-hidden="true" tabindex="-1"></a>area_km2 <span class="op">=</span> <span class="fl">42.88</span>           <span class="co"># Float</span></span>
<span id="cb37-212"><a href="#cb37-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-213"><a href="#cb37-213" aria-hidden="true" tabindex="-1"></a><span class="co"># Strings</span></span>
<span id="cb37-214"><a href="#cb37-214" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Manila"</span></span>
<span id="cb37-215"><a href="#cb37-215" aria-hidden="true" tabindex="-1"></a>province <span class="op">=</span> <span class="st">"Metro Manila"</span></span>
<span id="cb37-216"><a href="#cb37-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-217"><a href="#cb37-217" aria-hidden="true" tabindex="-1"></a><span class="co"># Lists (ordered collections)</span></span>
<span id="cb37-218"><a href="#cb37-218" aria-hidden="true" tabindex="-1"></a>regions <span class="op">=</span> [<span class="st">"Luzon"</span>, <span class="st">"Visayas"</span>, <span class="st">"Mindanao"</span>]</span>
<span id="cb37-219"><a href="#cb37-219" aria-hidden="true" tabindex="-1"></a>coordinates <span class="op">=</span> [<span class="fl">14.5995</span>, <span class="fl">120.9842</span>]  <span class="co"># [latitude, longitude]</span></span>
<span id="cb37-220"><a href="#cb37-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-221"><a href="#cb37-221" aria-hidden="true" tabindex="-1"></a><span class="co"># Dictionaries (key-value pairs)</span></span>
<span id="cb37-222"><a href="#cb37-222" aria-hidden="true" tabindex="-1"></a>location_info <span class="op">=</span> {</span>
<span id="cb37-223"><a href="#cb37-223" aria-hidden="true" tabindex="-1"></a>    <span class="st">"city"</span>: <span class="st">"Quezon City"</span>,</span>
<span id="cb37-224"><a href="#cb37-224" aria-hidden="true" tabindex="-1"></a>    <span class="st">"population"</span>: <span class="dv">2960048</span>,</span>
<span id="cb37-225"><a href="#cb37-225" aria-hidden="true" tabindex="-1"></a>    <span class="st">"region"</span>: <span class="st">"NCR"</span></span>
<span id="cb37-226"><a href="#cb37-226" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-227"><a href="#cb37-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-228"><a href="#cb37-228" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city<span class="sc">}</span><span class="ss"> has population </span><span class="sc">{</span>population<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb37-229"><a href="#cb37-229" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Regions: </span><span class="sc">{</span>regions<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-230"><a href="#cb37-230" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Coordinates: </span><span class="sc">{</span>coordinates<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-231"><a href="#cb37-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-232"><a href="#cb37-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-233"><a href="#cb37-233" aria-hidden="true" tabindex="-1"></a><span class="fu">### Control Structures</span></span>
<span id="cb37-234"><a href="#cb37-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-235"><a href="#cb37-235" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-236"><a href="#cb37-236" aria-hidden="true" tabindex="-1"></a><span class="co"># If statements</span></span>
<span id="cb37-237"><a href="#cb37-237" aria-hidden="true" tabindex="-1"></a>cloud_cover <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb37-238"><a href="#cb37-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-239"><a href="#cb37-239" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> cloud_cover <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb37-240"><a href="#cb37-240" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Excellent"</span></span>
<span id="cb37-241"><a href="#cb37-241" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> cloud_cover <span class="op">&lt;</span> <span class="dv">30</span>:</span>
<span id="cb37-242"><a href="#cb37-242" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Good"</span></span>
<span id="cb37-243"><a href="#cb37-243" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb37-244"><a href="#cb37-244" aria-hidden="true" tabindex="-1"></a>    quality <span class="op">=</span> <span class="st">"Poor"</span></span>
<span id="cb37-245"><a href="#cb37-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-246"><a href="#cb37-246" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Cloud cover </span><span class="sc">{</span>cloud_cover<span class="sc">}</span><span class="ss">%: </span><span class="sc">{</span>quality<span class="sc">}</span><span class="ss"> for optical imagery"</span>)</span>
<span id="cb37-247"><a href="#cb37-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-248"><a href="#cb37-248" aria-hidden="true" tabindex="-1"></a><span class="co"># For loops</span></span>
<span id="cb37-249"><a href="#cb37-249" aria-hidden="true" tabindex="-1"></a>provinces <span class="op">=</span> [<span class="st">"Palawan"</span>, <span class="st">"Zambales"</span>, <span class="st">"Quezon"</span>]</span>
<span id="cb37-250"><a href="#cb37-250" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> province <span class="kw">in</span> provinces:</span>
<span id="cb37-251"><a href="#cb37-251" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Processing </span><span class="sc">{</span>province<span class="sc">}</span><span class="ss">..."</span>)</span>
<span id="cb37-252"><a href="#cb37-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-253"><a href="#cb37-253" aria-hidden="true" tabindex="-1"></a><span class="co"># List comprehension (Pythonic way)</span></span>
<span id="cb37-254"><a href="#cb37-254" aria-hidden="true" tabindex="-1"></a>province_lengths <span class="op">=</span> [<span class="bu">len</span>(p) <span class="cf">for</span> p <span class="kw">in</span> provinces]</span>
<span id="cb37-255"><a href="#cb37-255" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Province name lengths:"</span>, province_lengths)</span>
<span id="cb37-256"><a href="#cb37-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-257"><a href="#cb37-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-258"><a href="#cb37-258" aria-hidden="true" tabindex="-1"></a><span class="fu">### Functions</span></span>
<span id="cb37-259"><a href="#cb37-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-260"><a href="#cb37-260" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-261"><a href="#cb37-261" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_ndvi(nir, red):</span>
<span id="cb37-262"><a href="#cb37-262" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate Normalized Difference Vegetation Index."""</span></span>
<span id="cb37-263"><a href="#cb37-263" aria-hidden="true" tabindex="-1"></a>    ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)  <span class="co"># Add small value to avoid division by zero</span></span>
<span id="cb37-264"><a href="#cb37-264" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ndvi</span>
<span id="cb37-265"><a href="#cb37-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-266"><a href="#cb37-266" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb37-267"><a href="#cb37-267" aria-hidden="true" tabindex="-1"></a>nir_value <span class="op">=</span> <span class="fl">0.8</span></span>
<span id="cb37-268"><a href="#cb37-268" aria-hidden="true" tabindex="-1"></a>red_value <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb37-269"><a href="#cb37-269" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> calculate_ndvi(nir_value, red_value)</span>
<span id="cb37-270"><a href="#cb37-270" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI: </span><span class="sc">{</span>result<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb37-271"><a href="#cb37-271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-272"><a href="#cb37-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-273"><a href="#cb37-273" aria-hidden="true" tabindex="-1"></a>**Key Python concepts for geospatial:**</span>
<span id="cb37-274"><a href="#cb37-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-275"><a href="#cb37-275" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Indentation matters:** Use 4 spaces to define code blocks</span>
<span id="cb37-276"><a href="#cb37-276" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**0-indexed:** First element is <span class="in">`list[0]`</span>, not <span class="in">`list[1]`</span></span>
<span id="cb37-277"><a href="#cb37-277" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Method chaining:** <span class="in">`gdf.filter(...).plot()`</span></span>
<span id="cb37-278"><a href="#cb37-278" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Context managers:** <span class="in">`with rasterio.open() as src:`</span> (auto-cleanup)</span>
<span id="cb37-279"><a href="#cb37-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-280"><a href="#cb37-280" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-281"><a href="#cb37-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-282"><a href="#cb37-282" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 4: Vector Data with GeoPandas</span></span>
<span id="cb37-283"><a href="#cb37-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-284"><a href="#cb37-284" aria-hidden="true" tabindex="-1"></a><span class="fu">### What is Vector Data?</span></span>
<span id="cb37-285"><a href="#cb37-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-286"><a href="#cb37-286" aria-hidden="true" tabindex="-1"></a>**Vector data represents discrete features:**</span>
<span id="cb37-287"><a href="#cb37-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-288"><a href="#cb37-288" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Points:** Cities, field sites, observation locations</span>
<span id="cb37-289"><a href="#cb37-289" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Lines:** Roads, rivers, transects</span>
<span id="cb37-290"><a href="#cb37-290" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Polygons:** Administrative boundaries, land parcels, watersheds</span>
<span id="cb37-291"><a href="#cb37-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-292"><a href="#cb37-292" aria-hidden="true" tabindex="-1"></a>**Common formats:** Shapefile (.shp), GeoJSON, KML, GeoPackage</span>
<span id="cb37-293"><a href="#cb37-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-294"><a href="#cb37-294" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Philippine Administrative Boundaries</span></span>
<span id="cb37-295"><a href="#cb37-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-296"><a href="#cb37-296" aria-hidden="true" tabindex="-1"></a>Let's load provincial boundaries of the Philippines:</span>
<span id="cb37-297"><a href="#cb37-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-298"><a href="#cb37-298" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-299"><a href="#cb37-299" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: From Google Drive (if you uploaded data)</span></span>
<span id="cb37-300"><a href="#cb37-300" aria-hidden="true" tabindex="-1"></a>provinces <span class="op">=</span> gpd.read_file(<span class="st">'/content/drive/MyDrive/CopPhil_Training/data/vector/philippines_provinces.shp'</span>)</span>
<span id="cb37-301"><a href="#cb37-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-302"><a href="#cb37-302" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: From URL (using sample data)</span></span>
<span id="cb37-303"><a href="#cb37-303" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/altcoder/philippines-json-maps/master/geojson/provinces/hires/BOHOL.json"</span></span>
<span id="cb37-304"><a href="#cb37-304" aria-hidden="true" tabindex="-1"></a>sample_province <span class="op">=</span> gpd.read_file(url)</span>
<span id="cb37-305"><a href="#cb37-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-306"><a href="#cb37-306" aria-hidden="true" tabindex="-1"></a><span class="co"># For this example, let's use the sample</span></span>
<span id="cb37-307"><a href="#cb37-307" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> sample_province</span>
<span id="cb37-308"><a href="#cb37-308" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Loaded successfully! ✓"</span>)</span>
<span id="cb37-309"><a href="#cb37-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-310"><a href="#cb37-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-311"><a href="#cb37-311" aria-hidden="true" tabindex="-1"></a>::: {.philippine-context}</span>
<span id="cb37-312"><a href="#cb37-312" aria-hidden="true" tabindex="-1"></a>**Philippine Geospatial Data Sources:**</span>
<span id="cb37-313"><a href="#cb37-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-314"><a href="#cb37-314" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**NAMRIA Geoportal:** Official administrative boundaries</span>
<span id="cb37-315"><a href="#cb37-315" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**PhilGIS:** Open-source Philippine GIS data</span>
<span id="cb37-316"><a href="#cb37-316" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**GADM:** Global administrative boundaries</span>
<span id="cb37-317"><a href="#cb37-317" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**OpenStreetMap:** Roads, buildings, POIs</span>
<span id="cb37-318"><a href="#cb37-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-319"><a href="#cb37-319" aria-hidden="true" tabindex="-1"></a>Download shapefiles and upload to your Google Drive for this session.</span>
<span id="cb37-320"><a href="#cb37-320" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-321"><a href="#cb37-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-322"><a href="#cb37-322" aria-hidden="true" tabindex="-1"></a><span class="fu">### Inspecting a GeoDataFrame</span></span>
<span id="cb37-323"><a href="#cb37-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-324"><a href="#cb37-324" aria-hidden="true" tabindex="-1"></a>**View first rows:**</span>
<span id="cb37-325"><a href="#cb37-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-326"><a href="#cb37-326" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-327"><a href="#cb37-327" aria-hidden="true" tabindex="-1"></a>gdf.head()</span>
<span id="cb37-328"><a href="#cb37-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-329"><a href="#cb37-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-330"><a href="#cb37-330" aria-hidden="true" tabindex="-1"></a>This shows:</span>
<span id="cb37-331"><a href="#cb37-331" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Attribute columns (NAME, PROVINCE, REGION, etc.)</span>
<span id="cb37-332"><a href="#cb37-332" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**geometry column:** The shapes themselves (Polygon or MultiPolygon)</span>
<span id="cb37-333"><a href="#cb37-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-334"><a href="#cb37-334" aria-hidden="true" tabindex="-1"></a>**Check coordinate reference system:**</span>
<span id="cb37-335"><a href="#cb37-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-336"><a href="#cb37-336" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-337"><a href="#cb37-337" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CRS:"</span>, gdf.crs)</span>
<span id="cb37-338"><a href="#cb37-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-339"><a href="#cb37-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-340"><a href="#cb37-340" aria-hidden="true" tabindex="-1"></a>**Common CRS values:**</span>
<span id="cb37-341"><a href="#cb37-341" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`EPSG:4326`</span> - WGS84 latitude/longitude (geographic)</span>
<span id="cb37-342"><a href="#cb37-342" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`EPSG:32651`</span> - UTM Zone 51N (projected, meters)</span>
<span id="cb37-343"><a href="#cb37-343" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`EPSG:3123`</span> - PRS92 Philippines Zone III</span>
<span id="cb37-344"><a href="#cb37-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-345"><a href="#cb37-345" aria-hidden="true" tabindex="-1"></a>**Get basic info:**</span>
<span id="cb37-346"><a href="#cb37-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-347"><a href="#cb37-347" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-348"><a href="#cb37-348" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of features: </span><span class="sc">{</span><span class="bu">len</span>(gdf)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-349"><a href="#cb37-349" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Geometry type: </span><span class="sc">{</span>gdf<span class="sc">.</span>geometry<span class="sc">.</span><span class="bu">type</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-350"><a href="#cb37-350" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Bounds: </span><span class="sc">{</span>gdf<span class="sc">.</span>total_bounds<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># [minx, miny, maxx, maxy]</span></span>
<span id="cb37-351"><a href="#cb37-351" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Columns: </span><span class="sc">{</span><span class="bu">list</span>(gdf.columns)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-352"><a href="#cb37-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-353"><a href="#cb37-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-354"><a href="#cb37-354" aria-hidden="true" tabindex="-1"></a>**Summary statistics:**</span>
<span id="cb37-355"><a href="#cb37-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-356"><a href="#cb37-356" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-357"><a href="#cb37-357" aria-hidden="true" tabindex="-1"></a>gdf.info()</span>
<span id="cb37-358"><a href="#cb37-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-359"><a href="#cb37-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-360"><a href="#cb37-360" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filtering and Querying</span></span>
<span id="cb37-361"><a href="#cb37-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-362"><a href="#cb37-362" aria-hidden="true" tabindex="-1"></a>**Filter by attribute:**</span>
<span id="cb37-363"><a href="#cb37-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-364"><a href="#cb37-364" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-365"><a href="#cb37-365" aria-hidden="true" tabindex="-1"></a><span class="co"># If using multi-province dataset:</span></span>
<span id="cb37-366"><a href="#cb37-366" aria-hidden="true" tabindex="-1"></a><span class="co"># luzon_provinces = gdf[gdf['ISLAND'] == 'LUZON']</span></span>
<span id="cb37-367"><a href="#cb37-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-368"><a href="#cb37-368" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by area (if area column exists)</span></span>
<span id="cb37-369"><a href="#cb37-369" aria-hidden="true" tabindex="-1"></a><span class="co"># large_provinces = gdf[gdf['AREA_KM2'] &gt; 5000]</span></span>
<span id="cb37-370"><a href="#cb37-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-371"><a href="#cb37-371" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Select specific province by name</span></span>
<span id="cb37-372"><a href="#cb37-372" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> gdf[gdf[<span class="st">'NAME'</span>].<span class="bu">str</span>.contains(<span class="st">'Bohol'</span>, case<span class="op">=</span><span class="va">False</span>)]</span>
<span id="cb37-373"><a href="#cb37-373" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Selected: </span><span class="sc">{</span>target[<span class="st">'NAME'</span>]<span class="sc">.</span>values<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-374"><a href="#cb37-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-375"><a href="#cb37-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-376"><a href="#cb37-376" aria-hidden="true" tabindex="-1"></a>**Spatial filtering:**</span>
<span id="cb37-377"><a href="#cb37-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-378"><a href="#cb37-378" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-379"><a href="#cb37-379" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if geometries are valid</span></span>
<span id="cb37-380"><a href="#cb37-380" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Valid geometries: </span><span class="sc">{</span>gdf<span class="sc">.</span>geometry<span class="sc">.</span>is_valid<span class="sc">.</span><span class="bu">all</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-381"><a href="#cb37-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-382"><a href="#cb37-382" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate centroids</span></span>
<span id="cb37-383"><a href="#cb37-383" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'centroid'</span>] <span class="op">=</span> gdf.geometry.centroid</span>
<span id="cb37-384"><a href="#cb37-384" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Centroid of first feature: </span><span class="sc">{</span>gdf[<span class="st">'centroid'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-385"><a href="#cb37-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-386"><a href="#cb37-386" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate area (will be in units of CRS - degrees for EPSG:4326)</span></span>
<span id="cb37-387"><a href="#cb37-387" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'area'</span>] <span class="op">=</span> gdf.geometry.area</span>
<span id="cb37-388"><a href="#cb37-388" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Areas: </span><span class="sc">{</span>gdf[<span class="st">'area'</span>]<span class="sc">.</span>head()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-389"><a href="#cb37-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-390"><a href="#cb37-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-391"><a href="#cb37-391" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb37-392"><a href="#cb37-392" aria-hidden="true" tabindex="-1"></a><span class="fu">## Working with CRS</span></span>
<span id="cb37-393"><a href="#cb37-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-394"><a href="#cb37-394" aria-hidden="true" tabindex="-1"></a>**To project to meters for accurate area calculation:**</span>
<span id="cb37-395"><a href="#cb37-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-396"><a href="#cb37-396" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-397"><a href="#cb37-397" aria-hidden="true" tabindex="-1"></a><span class="co"># Reproject to UTM Zone 51N (appropriate for Philippines)</span></span>
<span id="cb37-398"><a href="#cb37-398" aria-hidden="true" tabindex="-1"></a>gdf_utm <span class="op">=</span> gdf.to_crs(<span class="st">'EPSG:32651'</span>)</span>
<span id="cb37-399"><a href="#cb37-399" aria-hidden="true" tabindex="-1"></a>gdf_utm[<span class="st">'area_km2'</span>] <span class="op">=</span> gdf_utm.geometry.area <span class="op">/</span> <span class="dv">1_000_000</span>  <span class="co"># Convert m² to km²</span></span>
<span id="cb37-400"><a href="#cb37-400" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Province area: </span><span class="sc">{</span>gdf_utm[<span class="st">'area_km2'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">:.2f}</span><span class="ss"> km²"</span>)</span>
<span id="cb37-401"><a href="#cb37-401" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-402"><a href="#cb37-402" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-403"><a href="#cb37-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-404"><a href="#cb37-404" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizing Vector Data</span></span>
<span id="cb37-405"><a href="#cb37-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-406"><a href="#cb37-406" aria-hidden="true" tabindex="-1"></a>**Simple plot:**</span>
<span id="cb37-407"><a href="#cb37-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-408"><a href="#cb37-408" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-409"><a href="#cb37-409" aria-hidden="true" tabindex="-1"></a>gdf.plot(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>), edgecolor<span class="op">=</span><span class="st">'black'</span>, facecolor<span class="op">=</span><span class="st">'lightblue'</span>)</span>
<span id="cb37-410"><a href="#cb37-410" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Bohol Province, Philippines"</span>)</span>
<span id="cb37-411"><a href="#cb37-411" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb37-412"><a href="#cb37-412" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb37-413"><a href="#cb37-413" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-414"><a href="#cb37-414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-415"><a href="#cb37-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-416"><a href="#cb37-416" aria-hidden="true" tabindex="-1"></a>**Styled plot with colors:**</span>
<span id="cb37-417"><a href="#cb37-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-418"><a href="#cb37-418" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-419"><a href="#cb37-419" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have multiple provinces with a classification column:</span></span>
<span id="cb37-420"><a href="#cb37-420" aria-hidden="true" tabindex="-1"></a><span class="co"># gdf.plot(column='REGION', legend=True, figsize=(10, 10),</span></span>
<span id="cb37-421"><a href="#cb37-421" aria-hidden="true" tabindex="-1"></a><span class="co">#          cmap='Set3', edgecolor='black', linewidth=0.5)</span></span>
<span id="cb37-422"><a href="#cb37-422" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.title("Philippines Provinces by Region")</span></span>
<span id="cb37-423"><a href="#cb37-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-424"><a href="#cb37-424" aria-hidden="true" tabindex="-1"></a><span class="co"># For single feature, style it:</span></span>
<span id="cb37-425"><a href="#cb37-425" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb37-426"><a href="#cb37-426" aria-hidden="true" tabindex="-1"></a>gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'#90EE90'</span>, edgecolor<span class="op">=</span><span class="st">'darkgreen'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb37-427"><a href="#cb37-427" aria-hidden="true" tabindex="-1"></a>gdf[<span class="st">'centroid'</span>].plot(ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">'red'</span>, markersize<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb37-428"><a href="#cb37-428" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Bohol Province with Centroid"</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb37-429"><a href="#cb37-429" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb37-430"><a href="#cb37-430" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb37-431"><a href="#cb37-431" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb37-432"><a href="#cb37-432" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-433"><a href="#cb37-433" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-434"><a href="#cb37-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-435"><a href="#cb37-435" aria-hidden="true" tabindex="-1"></a>**Interactive exploration:**</span>
<span id="cb37-436"><a href="#cb37-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-437"><a href="#cb37-437" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-438"><a href="#cb37-438" aria-hidden="true" tabindex="-1"></a><span class="co"># Display attribute table interactively</span></span>
<span id="cb37-439"><a href="#cb37-439" aria-hidden="true" tabindex="-1"></a>gdf[[<span class="st">'NAME'</span>, <span class="st">'geometry'</span>]]</span>
<span id="cb37-440"><a href="#cb37-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-441"><a href="#cb37-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-442"><a href="#cb37-442" aria-hidden="true" tabindex="-1"></a><span class="fu">### Example: Create Area of Interest (AOI)</span></span>
<span id="cb37-443"><a href="#cb37-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-444"><a href="#cb37-444" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-445"><a href="#cb37-445" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a simple polygon AOI (example coordinates)</span></span>
<span id="cb37-446"><a href="#cb37-446" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> Polygon</span>
<span id="cb37-447"><a href="#cb37-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-448"><a href="#cb37-448" aria-hidden="true" tabindex="-1"></a><span class="co"># Bounding box coordinates (minx, miny, maxx, maxy)</span></span>
<span id="cb37-449"><a href="#cb37-449" aria-hidden="true" tabindex="-1"></a>aoi_coords <span class="op">=</span> [</span>
<span id="cb37-450"><a href="#cb37-450" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">9.5</span>),   <span class="co"># Southwest corner</span></span>
<span id="cb37-451"><a href="#cb37-451" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">125.0</span>, <span class="fl">9.5</span>),   <span class="co"># Southeast corner</span></span>
<span id="cb37-452"><a href="#cb37-452" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">125.0</span>, <span class="fl">11.0</span>),  <span class="co"># Northeast corner</span></span>
<span id="cb37-453"><a href="#cb37-453" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">11.0</span>),  <span class="co"># Northwest corner</span></span>
<span id="cb37-454"><a href="#cb37-454" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">123.5</span>, <span class="fl">9.5</span>)    <span class="co"># Close polygon</span></span>
<span id="cb37-455"><a href="#cb37-455" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb37-456"><a href="#cb37-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-457"><a href="#cb37-457" aria-hidden="true" tabindex="-1"></a>aoi_polygon <span class="op">=</span> Polygon(aoi_coords)</span>
<span id="cb37-458"><a href="#cb37-458" aria-hidden="true" tabindex="-1"></a>aoi_gdf <span class="op">=</span> gpd.GeoDataFrame([<span class="dv">1</span>], geometry<span class="op">=</span>[aoi_polygon], crs<span class="op">=</span><span class="st">'EPSG:4326'</span>)</span>
<span id="cb37-459"><a href="#cb37-459" aria-hidden="true" tabindex="-1"></a>aoi_gdf.columns <span class="op">=</span> [<span class="st">'id'</span>, <span class="st">'geometry'</span>]</span>
<span id="cb37-460"><a href="#cb37-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-461"><a href="#cb37-461" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize AOI with province</span></span>
<span id="cb37-462"><a href="#cb37-462" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb37-463"><a href="#cb37-463" aria-hidden="true" tabindex="-1"></a>gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'lightgray'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb37-464"><a href="#cb37-464" aria-hidden="true" tabindex="-1"></a>aoi_gdf.plot(ax<span class="op">=</span>ax, facecolor<span class="op">=</span><span class="st">'none'</span>, edgecolor<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb37-465"><a href="#cb37-465" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Province with Area of Interest (Red Box)"</span>)</span>
<span id="cb37-466"><a href="#cb37-466" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-467"><a href="#cb37-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-468"><a href="#cb37-468" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"AOI created successfully! ✓"</span>)</span>
<span id="cb37-469"><a href="#cb37-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-470"><a href="#cb37-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-471"><a href="#cb37-471" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-472"><a href="#cb37-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-473"><a href="#cb37-473" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 5: Raster Data with Rasterio</span></span>
<span id="cb37-474"><a href="#cb37-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-475"><a href="#cb37-475" aria-hidden="true" tabindex="-1"></a><span class="fu">### What is Raster Data?</span></span>
<span id="cb37-476"><a href="#cb37-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-477"><a href="#cb37-477" aria-hidden="true" tabindex="-1"></a>**Raster data is a grid of pixels (cells), each with a value:**</span>
<span id="cb37-478"><a href="#cb37-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-479"><a href="#cb37-479" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Satellite imagery:** Each pixel = reflectance values</span>
<span id="cb37-480"><a href="#cb37-480" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**DEMs:** Each pixel = elevation</span>
<span id="cb37-481"><a href="#cb37-481" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Temperature maps:** Each pixel = temperature value</span>
<span id="cb37-482"><a href="#cb37-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-483"><a href="#cb37-483" aria-hidden="true" tabindex="-1"></a>**Common formats:** GeoTIFF (.tif), NetCDF (.nc), HDF (.hdf)</span>
<span id="cb37-484"><a href="#cb37-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-485"><a href="#cb37-485" aria-hidden="true" tabindex="-1"></a>**Raster structure:**</span>
<span id="cb37-486"><a href="#cb37-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-487"><a href="#cb37-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-488"><a href="#cb37-488" aria-hidden="true" tabindex="-1"></a><span class="in">┌─────┬─────┬─────┬─────┐</span></span>
<span id="cb37-489"><a href="#cb37-489" aria-hidden="true" tabindex="-1"></a><span class="in">│ 120 │ 130 │ 125 │ 118 │  ← Row 1</span></span>
<span id="cb37-490"><a href="#cb37-490" aria-hidden="true" tabindex="-1"></a><span class="in">├─────┼─────┼─────┼─────┤</span></span>
<span id="cb37-491"><a href="#cb37-491" aria-hidden="true" tabindex="-1"></a><span class="in">│ 115 │ 140 │ 135 │ 122 │  ← Row 2</span></span>
<span id="cb37-492"><a href="#cb37-492" aria-hidden="true" tabindex="-1"></a><span class="in">├─────┼─────┼─────┼─────┤</span></span>
<span id="cb37-493"><a href="#cb37-493" aria-hidden="true" tabindex="-1"></a><span class="in">│ 110 │ 125 │ 130 │ 119 │  ← Row 3</span></span>
<span id="cb37-494"><a href="#cb37-494" aria-hidden="true" tabindex="-1"></a><span class="in">└─────┴─────┴─────┴─────┘</span></span>
<span id="cb37-495"><a href="#cb37-495" aria-hidden="true" tabindex="-1"></a><span class="in">  Col1  Col2  Col3  Col4</span></span>
<span id="cb37-496"><a href="#cb37-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-497"><a href="#cb37-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-498"><a href="#cb37-498" aria-hidden="true" tabindex="-1"></a>Each cell has:</span>
<span id="cb37-499"><a href="#cb37-499" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Value:** Reflectance, elevation, class, etc.</span>
<span id="cb37-500"><a href="#cb37-500" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Location:** Defined by geotransform + CRS</span>
<span id="cb37-501"><a href="#cb37-501" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Size:** Spatial resolution (e.g., 10m)</span>
<span id="cb37-502"><a href="#cb37-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-503"><a href="#cb37-503" aria-hidden="true" tabindex="-1"></a><span class="fu">### Opening a Raster File</span></span>
<span id="cb37-504"><a href="#cb37-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-505"><a href="#cb37-505" aria-hidden="true" tabindex="-1"></a>**Example: Sentinel-2 imagery subset**</span>
<span id="cb37-506"><a href="#cb37-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-507"><a href="#cb37-507" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-508"><a href="#cb37-508" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample raster path (adjust to your data)</span></span>
<span id="cb37-509"><a href="#cb37-509" aria-hidden="true" tabindex="-1"></a>raster_path <span class="op">=</span> <span class="st">'/content/drive/MyDrive/CopPhil_Training/data/raster/sentinel2_bohol_subset.tif'</span></span>
<span id="cb37-510"><a href="#cb37-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-511"><a href="#cb37-511" aria-hidden="true" tabindex="-1"></a><span class="co"># For demonstration, we'll create sample raster metadata</span></span>
<span id="cb37-512"><a href="#cb37-512" aria-hidden="true" tabindex="-1"></a><span class="co"># In real workflow, you'd open your actual Sentinel-2 file</span></span>
<span id="cb37-513"><a href="#cb37-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-514"><a href="#cb37-514" aria-hidden="true" tabindex="-1"></a><span class="co"># Open raster</span></span>
<span id="cb37-515"><a href="#cb37-515" aria-hidden="true" tabindex="-1"></a>src <span class="op">=</span> rasterio.<span class="bu">open</span>(raster_path)</span>
<span id="cb37-516"><a href="#cb37-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-517"><a href="#cb37-517" aria-hidden="true" tabindex="-1"></a><span class="co"># View metadata</span></span>
<span id="cb37-518"><a href="#cb37-518" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Raster Metadata:"</span>)</span>
<span id="cb37-519"><a href="#cb37-519" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Width (pixels): </span><span class="sc">{</span>src<span class="sc">.</span>width<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-520"><a href="#cb37-520" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Height (pixels): </span><span class="sc">{</span>src<span class="sc">.</span>height<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-521"><a href="#cb37-521" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Number of bands: </span><span class="sc">{</span>src<span class="sc">.</span>count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-522"><a href="#cb37-522" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Data type: </span><span class="sc">{</span>src<span class="sc">.</span>dtypes[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-523"><a href="#cb37-523" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  CRS: </span><span class="sc">{</span>src<span class="sc">.</span>crs<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-524"><a href="#cb37-524" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Bounds: </span><span class="sc">{</span>src<span class="sc">.</span>bounds<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-525"><a href="#cb37-525" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Resolution: </span><span class="sc">{</span>src<span class="sc">.</span>res<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (x_res, y_res) in CRS units</span></span>
<span id="cb37-526"><a href="#cb37-526" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Nodata value: </span><span class="sc">{</span>src<span class="sc">.</span>nodata<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-527"><a href="#cb37-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-528"><a href="#cb37-528" aria-hidden="true" tabindex="-1"></a>src.close()</span>
<span id="cb37-529"><a href="#cb37-529" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-530"><a href="#cb37-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-531"><a href="#cb37-531" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb37-532"><a href="#cb37-532" aria-hidden="true" tabindex="-1"></a><span class="fu">## Raster Metadata Explanation</span></span>
<span id="cb37-533"><a href="#cb37-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-534"><a href="#cb37-534" aria-hidden="true" tabindex="-1"></a>**For a Sentinel-2 10m band over Bohol:**</span>
<span id="cb37-535"><a href="#cb37-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-536"><a href="#cb37-536" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Width/Height:** 5000 x 5000 pixels → 50km x 50km area</span>
<span id="cb37-537"><a href="#cb37-537" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Bands:** 4 (Blue, Green, Red, NIR if subset)</span>
<span id="cb37-538"><a href="#cb37-538" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Data type:** uint16 (0-65535 range)</span>
<span id="cb37-539"><a href="#cb37-539" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CRS:** EPSG:32651 (UTM Zone 51N)</span>
<span id="cb37-540"><a href="#cb37-540" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Resolution:** (10.0, -10.0) meters (negative y = north-up)</span>
<span id="cb37-541"><a href="#cb37-541" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Nodata:** 0 or 65535 (no valid data)</span>
<span id="cb37-542"><a href="#cb37-542" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-543"><a href="#cb37-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-544"><a href="#cb37-544" aria-hidden="true" tabindex="-1"></a>**Better pattern: Context manager (auto-closes file)**</span>
<span id="cb37-545"><a href="#cb37-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-546"><a href="#cb37-546" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-547"><a href="#cb37-547" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-548"><a href="#cb37-548" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Opened: </span><span class="sc">{</span>src<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-549"><a href="#cb37-549" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Bands: </span><span class="sc">{</span>src<span class="sc">.</span>count<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-550"><a href="#cb37-550" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Work with src here</span></span>
<span id="cb37-551"><a href="#cb37-551" aria-hidden="true" tabindex="-1"></a><span class="co"># File automatically closed after 'with' block</span></span>
<span id="cb37-552"><a href="#cb37-552" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-553"><a href="#cb37-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-554"><a href="#cb37-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reading Raster Data into Arrays</span></span>
<span id="cb37-555"><a href="#cb37-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-556"><a href="#cb37-556" aria-hidden="true" tabindex="-1"></a>**Read a single band:**</span>
<span id="cb37-557"><a href="#cb37-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-558"><a href="#cb37-558" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-559"><a href="#cb37-559" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-560"><a href="#cb37-560" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read band 1 (Rasterio uses 1-indexing for bands)</span></span>
<span id="cb37-561"><a href="#cb37-561" aria-hidden="true" tabindex="-1"></a>    band1 <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb37-562"><a href="#cb37-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-563"><a href="#cb37-563" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Band 1 shape: </span><span class="sc">{</span>band1<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (height, width)</span></span>
<span id="cb37-564"><a href="#cb37-564" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Data type: </span><span class="sc">{</span>band1<span class="sc">.</span>dtype<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-565"><a href="#cb37-565" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Min value: </span><span class="sc">{</span>band1<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss">, Max value: </span><span class="sc">{</span>band1<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-566"><a href="#cb37-566" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean value: </span><span class="sc">{</span>band1<span class="sc">.</span>mean()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb37-567"><a href="#cb37-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-568"><a href="#cb37-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-569"><a href="#cb37-569" aria-hidden="true" tabindex="-1"></a>**Read multiple bands:**</span>
<span id="cb37-570"><a href="#cb37-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-571"><a href="#cb37-571" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-572"><a href="#cb37-572" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-573"><a href="#cb37-573" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read all bands as 3D array (bands, height, width)</span></span>
<span id="cb37-574"><a href="#cb37-574" aria-hidden="true" tabindex="-1"></a>    all_bands <span class="op">=</span> src.read()</span>
<span id="cb37-575"><a href="#cb37-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-576"><a href="#cb37-576" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Or read specific bands</span></span>
<span id="cb37-577"><a href="#cb37-577" aria-hidden="true" tabindex="-1"></a>    blue <span class="op">=</span> src.read(<span class="dv">1</span>)   <span class="co"># Band 1: Blue</span></span>
<span id="cb37-578"><a href="#cb37-578" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)  <span class="co"># Band 2: Green</span></span>
<span id="cb37-579"><a href="#cb37-579" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)    <span class="co"># Band 3: Red</span></span>
<span id="cb37-580"><a href="#cb37-580" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>)    <span class="co"># Band 4: NIR</span></span>
<span id="cb37-581"><a href="#cb37-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-582"><a href="#cb37-582" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"All bands shape: </span><span class="sc">{</span>all_bands<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># (4, height, width)</span></span>
<span id="cb37-583"><a href="#cb37-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-584"><a href="#cb37-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-585"><a href="#cb37-585" aria-hidden="true" tabindex="-1"></a>**For Sentinel-2, typical band order in L2A products:**</span>
<span id="cb37-586"><a href="#cb37-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-587"><a href="#cb37-587" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Band # <span class="pp">|</span> Wavelength <span class="pp">|</span> Name <span class="pp">|</span> Resolution <span class="pp">|</span></span>
<span id="cb37-588"><a href="#cb37-588" aria-hidden="true" tabindex="-1"></a><span class="pp">|--------|------------|------|------------|</span></span>
<span id="cb37-589"><a href="#cb37-589" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1 <span class="pp">|</span> 490 nm <span class="pp">|</span> Blue (B2) <span class="pp">|</span> 10m <span class="pp">|</span></span>
<span id="cb37-590"><a href="#cb37-590" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2 <span class="pp">|</span> 560 nm <span class="pp">|</span> Green (B3) <span class="pp">|</span> 10m <span class="pp">|</span></span>
<span id="cb37-591"><a href="#cb37-591" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 3 <span class="pp">|</span> 665 nm <span class="pp">|</span> Red (B4) <span class="pp">|</span> 10m <span class="pp">|</span></span>
<span id="cb37-592"><a href="#cb37-592" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 4 <span class="pp">|</span> 842 nm <span class="pp">|</span> NIR (B8) <span class="pp">|</span> 10m <span class="pp">|</span></span>
<span id="cb37-593"><a href="#cb37-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-594"><a href="#cb37-594" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Spectral Indices</span></span>
<span id="cb37-595"><a href="#cb37-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-596"><a href="#cb37-596" aria-hidden="true" tabindex="-1"></a><span class="fu">#### NDVI (Normalized Difference Vegetation Index)</span></span>
<span id="cb37-597"><a href="#cb37-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-598"><a href="#cb37-598" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-599"><a href="#cb37-599" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-600"><a href="#cb37-600" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>).astype(<span class="bu">float</span>)</span>
<span id="cb37-601"><a href="#cb37-601" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>).astype(<span class="bu">float</span>)</span>
<span id="cb37-602"><a href="#cb37-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-603"><a href="#cb37-603" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate NDVI</span></span>
<span id="cb37-604"><a href="#cb37-604" aria-hidden="true" tabindex="-1"></a><span class="co"># NDVI = (NIR - Red) / (NIR + Red)</span></span>
<span id="cb37-605"><a href="#cb37-605" aria-hidden="true" tabindex="-1"></a>ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)  <span class="co"># Small value prevents division by zero</span></span>
<span id="cb37-606"><a href="#cb37-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-607"><a href="#cb37-607" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI range: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.3f}</span><span class="ss"> to </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb37-608"><a href="#cb37-608" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI mean: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb37-609"><a href="#cb37-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-610"><a href="#cb37-610" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize NDVI</span></span>
<span id="cb37-611"><a href="#cb37-611" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb37-612"><a href="#cb37-612" aria-hidden="true" tabindex="-1"></a>plt.imshow(ndvi, cmap<span class="op">=</span><span class="st">'RdYlGn'</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-613"><a href="#cb37-613" aria-hidden="true" tabindex="-1"></a>plt.colorbar(label<span class="op">=</span><span class="st">'NDVI'</span>, shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb37-614"><a href="#cb37-614" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"NDVI - Vegetation Index"</span>)</span>
<span id="cb37-615"><a href="#cb37-615" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Column (pixels)"</span>)</span>
<span id="cb37-616"><a href="#cb37-616" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Row (pixels)"</span>)</span>
<span id="cb37-617"><a href="#cb37-617" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-618"><a href="#cb37-618" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-619"><a href="#cb37-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-620"><a href="#cb37-620" aria-hidden="true" tabindex="-1"></a>**NDVI interpretation:**</span>
<span id="cb37-621"><a href="#cb37-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-622"><a href="#cb37-622" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**&lt;0:** Water, clouds, snow</span>
<span id="cb37-623"><a href="#cb37-623" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**0-0.2:** Bare soil, rock, sand, urban</span>
<span id="cb37-624"><a href="#cb37-624" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**0.2-0.4:** Sparse vegetation, grassland</span>
<span id="cb37-625"><a href="#cb37-625" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**0.4-0.7:** Moderate vegetation, cropland</span>
<span id="cb37-626"><a href="#cb37-626" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**&gt;0.7:** Dense vegetation, healthy forest</span>
<span id="cb37-627"><a href="#cb37-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-628"><a href="#cb37-628" aria-hidden="true" tabindex="-1"></a>::: {.philippine-context}</span>
<span id="cb37-629"><a href="#cb37-629" aria-hidden="true" tabindex="-1"></a>**Philippine Application: Rice Paddy Monitoring**</span>
<span id="cb37-630"><a href="#cb37-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-631"><a href="#cb37-631" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-632"><a href="#cb37-632" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify rice paddies (moderate-high NDVI during growing season)</span></span>
<span id="cb37-633"><a href="#cb37-633" aria-hidden="true" tabindex="-1"></a>rice_mask <span class="op">=</span> (ndvi <span class="op">&gt;</span> <span class="fl">0.5</span>) <span class="op">&amp;</span> (ndvi <span class="op">&lt;</span> <span class="fl">0.85</span>)</span>
<span id="cb37-634"><a href="#cb37-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-635"><a href="#cb37-635" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb37-636"><a href="#cb37-636" aria-hidden="true" tabindex="-1"></a>plt.imshow(rice_mask, cmap<span class="op">=</span><span class="st">'Greens'</span>)</span>
<span id="cb37-637"><a href="#cb37-637" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Potential Rice Paddies (NDVI 0.5-0.85)"</span>)</span>
<span id="cb37-638"><a href="#cb37-638" aria-hidden="true" tabindex="-1"></a>plt.colorbar()</span>
<span id="cb37-639"><a href="#cb37-639" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-640"><a href="#cb37-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-641"><a href="#cb37-641" aria-hidden="true" tabindex="-1"></a>rice_pixels <span class="op">=</span> rice_mask.<span class="bu">sum</span>()</span>
<span id="cb37-642"><a href="#cb37-642" aria-hidden="true" tabindex="-1"></a>total_pixels <span class="op">=</span> rice_mask.size</span>
<span id="cb37-643"><a href="#cb37-643" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Potential rice paddies: </span><span class="sc">{</span>rice_pixels<span class="sc">:,}</span><span class="ss"> pixels (</span><span class="sc">{</span>rice_pixels<span class="op">/</span>total_pixels<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb37-644"><a href="#cb37-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-645"><a href="#cb37-645" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-646"><a href="#cb37-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-647"><a href="#cb37-647" aria-hidden="true" tabindex="-1"></a><span class="fu">#### NDWI (Normalized Difference Water Index)</span></span>
<span id="cb37-648"><a href="#cb37-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-649"><a href="#cb37-649" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-650"><a href="#cb37-650" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-651"><a href="#cb37-651" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>).astype(<span class="bu">float</span>)</span>
<span id="cb37-652"><a href="#cb37-652" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>).astype(<span class="bu">float</span>)</span>
<span id="cb37-653"><a href="#cb37-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-654"><a href="#cb37-654" aria-hidden="true" tabindex="-1"></a><span class="co"># NDWI = (Green - NIR) / (Green + NIR)</span></span>
<span id="cb37-655"><a href="#cb37-655" aria-hidden="true" tabindex="-1"></a>ndwi <span class="op">=</span> (green <span class="op">-</span> nir) <span class="op">/</span> (green <span class="op">+</span> nir <span class="op">+</span> <span class="fl">1e-10</span>)</span>
<span id="cb37-656"><a href="#cb37-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-657"><a href="#cb37-657" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb37-658"><a href="#cb37-658" aria-hidden="true" tabindex="-1"></a>plt.imshow(ndwi, cmap<span class="op">=</span><span class="st">'Blues'</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-659"><a href="#cb37-659" aria-hidden="true" tabindex="-1"></a>plt.colorbar(label<span class="op">=</span><span class="st">'NDWI'</span>, shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb37-660"><a href="#cb37-660" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"NDWI - Water Index"</span>)</span>
<span id="cb37-661"><a href="#cb37-661" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-662"><a href="#cb37-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-663"><a href="#cb37-663" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract water bodies (NDWI &gt; 0.3)</span></span>
<span id="cb37-664"><a href="#cb37-664" aria-hidden="true" tabindex="-1"></a>water_mask <span class="op">=</span> ndwi <span class="op">&gt;</span> <span class="fl">0.3</span></span>
<span id="cb37-665"><a href="#cb37-665" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Water pixels: </span><span class="sc">{</span>water_mask<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb37-666"><a href="#cb37-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-667"><a href="#cb37-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-668"><a href="#cb37-668" aria-hidden="true" tabindex="-1"></a><span class="fu">### Creating RGB Composites</span></span>
<span id="cb37-669"><a href="#cb37-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-670"><a href="#cb37-670" aria-hidden="true" tabindex="-1"></a>**True color composite (Red, Green, Blue):**</span>
<span id="cb37-671"><a href="#cb37-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-672"><a href="#cb37-672" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-673"><a href="#cb37-673" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-674"><a href="#cb37-674" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)</span>
<span id="cb37-675"><a href="#cb37-675" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)</span>
<span id="cb37-676"><a href="#cb37-676" aria-hidden="true" tabindex="-1"></a>    blue <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb37-677"><a href="#cb37-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-678"><a href="#cb37-678" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack bands into RGB array</span></span>
<span id="cb37-679"><a href="#cb37-679" aria-hidden="true" tabindex="-1"></a>rgb <span class="op">=</span> np.stack([red, green, blue], axis<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb37-680"><a href="#cb37-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-681"><a href="#cb37-681" aria-hidden="true" tabindex="-1"></a><span class="co"># Scale to 0-1 range for display (Sentinel-2 L2A is 0-10000)</span></span>
<span id="cb37-682"><a href="#cb37-682" aria-hidden="true" tabindex="-1"></a>rgb_scaled <span class="op">=</span> rgb.astype(<span class="bu">float</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb37-683"><a href="#cb37-683" aria-hidden="true" tabindex="-1"></a>rgb_scaled <span class="op">=</span> np.clip(rgb_scaled, <span class="dv">0</span>, <span class="dv">1</span>)  <span class="co"># Clip any values outside 0-1</span></span>
<span id="cb37-684"><a href="#cb37-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-685"><a href="#cb37-685" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhance contrast (optional)</span></span>
<span id="cb37-686"><a href="#cb37-686" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> skimage <span class="im">import</span> exposure</span>
<span id="cb37-687"><a href="#cb37-687" aria-hidden="true" tabindex="-1"></a>rgb_enhanced <span class="op">=</span> exposure.rescale_intensity(rgb_scaled, in_range<span class="op">=</span>(<span class="fl">0.0</span>, <span class="fl">0.3</span>), out_range<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb37-688"><a href="#cb37-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-689"><a href="#cb37-689" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb37-690"><a href="#cb37-690" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>))</span>
<span id="cb37-691"><a href="#cb37-691" aria-hidden="true" tabindex="-1"></a>plt.imshow(rgb_enhanced)</span>
<span id="cb37-692"><a href="#cb37-692" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"True Color Composite (Red-Green-Blue)"</span>)</span>
<span id="cb37-693"><a href="#cb37-693" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb37-694"><a href="#cb37-694" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-695"><a href="#cb37-695" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-696"><a href="#cb37-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-697"><a href="#cb37-697" aria-hidden="true" tabindex="-1"></a>**False color composite (NIR, Red, Green) - highlights vegetation:**</span>
<span id="cb37-698"><a href="#cb37-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-699"><a href="#cb37-699" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-700"><a href="#cb37-700" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-701"><a href="#cb37-701" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> src.read(<span class="dv">4</span>)</span>
<span id="cb37-702"><a href="#cb37-702" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> src.read(<span class="dv">3</span>)</span>
<span id="cb37-703"><a href="#cb37-703" aria-hidden="true" tabindex="-1"></a>    green <span class="op">=</span> src.read(<span class="dv">2</span>)</span>
<span id="cb37-704"><a href="#cb37-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-705"><a href="#cb37-705" aria-hidden="true" tabindex="-1"></a><span class="co"># NIR-R-G composite</span></span>
<span id="cb37-706"><a href="#cb37-706" aria-hidden="true" tabindex="-1"></a>false_color <span class="op">=</span> np.stack([nir, red, green], axis<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb37-707"><a href="#cb37-707" aria-hidden="true" tabindex="-1"></a>false_color_scaled <span class="op">=</span> false_color.astype(<span class="bu">float</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb37-708"><a href="#cb37-708" aria-hidden="true" tabindex="-1"></a>false_color_scaled <span class="op">=</span> np.clip(false_color_scaled, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb37-709"><a href="#cb37-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-710"><a href="#cb37-710" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>))</span>
<span id="cb37-711"><a href="#cb37-711" aria-hidden="true" tabindex="-1"></a>plt.imshow(false_color_scaled)</span>
<span id="cb37-712"><a href="#cb37-712" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"False Color Composite (NIR-Red-Green) - Vegetation appears red"</span>)</span>
<span id="cb37-713"><a href="#cb37-713" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb37-714"><a href="#cb37-714" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-715"><a href="#cb37-715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-716"><a href="#cb37-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-717"><a href="#cb37-717" aria-hidden="true" tabindex="-1"></a>**Why false color?**</span>
<span id="cb37-718"><a href="#cb37-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-719"><a href="#cb37-719" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Vegetation:** Appears bright red (high NIR reflectance)</span>
<span id="cb37-720"><a href="#cb37-720" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Water:** Appears dark blue/black (absorbs NIR)</span>
<span id="cb37-721"><a href="#cb37-721" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Urban:** Appears cyan/gray</span>
<span id="cb37-722"><a href="#cb37-722" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Bare soil:** Appears brown/tan</span>
<span id="cb37-723"><a href="#cb37-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-724"><a href="#cb37-724" aria-hidden="true" tabindex="-1"></a>Easier to distinguish land cover types!</span>
<span id="cb37-725"><a href="#cb37-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-726"><a href="#cb37-726" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-727"><a href="#cb37-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-728"><a href="#cb37-728" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 6: Combining Vector and Raster Operations</span></span>
<span id="cb37-729"><a href="#cb37-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-730"><a href="#cb37-730" aria-hidden="true" tabindex="-1"></a><span class="fu">### Clipping Raster to Vector Boundary</span></span>
<span id="cb37-731"><a href="#cb37-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-732"><a href="#cb37-732" aria-hidden="true" tabindex="-1"></a>**Extract raster data only within AOI polygon:**</span>
<span id="cb37-733"><a href="#cb37-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-734"><a href="#cb37-734" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-735"><a href="#cb37-735" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.mask <span class="im">import</span> mask</span>
<span id="cb37-736"><a href="#cb37-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-737"><a href="#cb37-737" aria-hidden="true" tabindex="-1"></a><span class="co"># Load AOI polygon (from earlier GeoPandas section)</span></span>
<span id="cb37-738"><a href="#cb37-738" aria-hidden="true" tabindex="-1"></a><span class="co"># aoi_gdf = ...</span></span>
<span id="cb37-739"><a href="#cb37-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-740"><a href="#cb37-740" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-741"><a href="#cb37-741" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ensure CRS match</span></span>
<span id="cb37-742"><a href="#cb37-742" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> aoi_gdf.crs <span class="op">!=</span> src.crs:</span>
<span id="cb37-743"><a href="#cb37-743" aria-hidden="true" tabindex="-1"></a>        aoi_gdf <span class="op">=</span> aoi_gdf.to_crs(src.crs)</span>
<span id="cb37-744"><a href="#cb37-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-745"><a href="#cb37-745" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get geometries in proper format</span></span>
<span id="cb37-746"><a href="#cb37-746" aria-hidden="true" tabindex="-1"></a>    shapes <span class="op">=</span> aoi_gdf.geometry.values</span>
<span id="cb37-747"><a href="#cb37-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-748"><a href="#cb37-748" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Clip raster</span></span>
<span id="cb37-749"><a href="#cb37-749" aria-hidden="true" tabindex="-1"></a>    out_image, out_transform <span class="op">=</span> mask(src, shapes, crop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-750"><a href="#cb37-750" aria-hidden="true" tabindex="-1"></a>    out_meta <span class="op">=</span> src.meta.copy()</span>
<span id="cb37-751"><a href="#cb37-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-752"><a href="#cb37-752" aria-hidden="true" tabindex="-1"></a><span class="co"># Update metadata for clipped raster</span></span>
<span id="cb37-753"><a href="#cb37-753" aria-hidden="true" tabindex="-1"></a>out_meta.update({</span>
<span id="cb37-754"><a href="#cb37-754" aria-hidden="true" tabindex="-1"></a>    <span class="st">"driver"</span>: <span class="st">"GTiff"</span>,</span>
<span id="cb37-755"><a href="#cb37-755" aria-hidden="true" tabindex="-1"></a>    <span class="st">"height"</span>: out_image.shape[<span class="dv">1</span>],</span>
<span id="cb37-756"><a href="#cb37-756" aria-hidden="true" tabindex="-1"></a>    <span class="st">"width"</span>: out_image.shape[<span class="dv">2</span>],</span>
<span id="cb37-757"><a href="#cb37-757" aria-hidden="true" tabindex="-1"></a>    <span class="st">"transform"</span>: out_transform</span>
<span id="cb37-758"><a href="#cb37-758" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-759"><a href="#cb37-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-760"><a href="#cb37-760" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Original raster: </span><span class="sc">{</span>src<span class="sc">.</span>width<span class="sc">}</span><span class="ss"> x </span><span class="sc">{</span>src<span class="sc">.</span>height<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-761"><a href="#cb37-761" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Clipped raster: </span><span class="sc">{</span>out_meta[<span class="st">'width'</span>]<span class="sc">}</span><span class="ss"> x </span><span class="sc">{</span>out_meta[<span class="st">'height'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-762"><a href="#cb37-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-763"><a href="#cb37-763" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize clipped area</span></span>
<span id="cb37-764"><a href="#cb37-764" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">6</span>))</span>
<span id="cb37-765"><a href="#cb37-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-766"><a href="#cb37-766" aria-hidden="true" tabindex="-1"></a><span class="co"># Original</span></span>
<span id="cb37-767"><a href="#cb37-767" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].imshow(src.read(<span class="dv">3</span>), cmap<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb37-768"><a href="#cb37-768" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Original Raster"</span>)</span>
<span id="cb37-769"><a href="#cb37-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-770"><a href="#cb37-770" aria-hidden="true" tabindex="-1"></a><span class="co"># Clipped</span></span>
<span id="cb37-771"><a href="#cb37-771" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].imshow(out_image[<span class="dv">2</span>], cmap<span class="op">=</span><span class="st">'gray'</span>)  <span class="co"># Band 3 (Red)</span></span>
<span id="cb37-772"><a href="#cb37-772" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Clipped to AOI"</span>)</span>
<span id="cb37-773"><a href="#cb37-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-774"><a href="#cb37-774" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb37-775"><a href="#cb37-775" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-776"><a href="#cb37-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-777"><a href="#cb37-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-778"><a href="#cb37-778" aria-hidden="true" tabindex="-1"></a>**Save clipped raster:**</span>
<span id="cb37-779"><a href="#cb37-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-780"><a href="#cb37-780" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-781"><a href="#cb37-781" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> <span class="st">'/content/drive/MyDrive/CopPhil_Training/outputs/clipped_raster.tif'</span></span>
<span id="cb37-782"><a href="#cb37-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-783"><a href="#cb37-783" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(output_path, <span class="st">'w'</span>, <span class="op">**</span>out_meta) <span class="im">as</span> dest:</span>
<span id="cb37-784"><a href="#cb37-784" aria-hidden="true" tabindex="-1"></a>    dest.write(out_image)</span>
<span id="cb37-785"><a href="#cb37-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-786"><a href="#cb37-786" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"✓ Saved clipped raster to: </span><span class="sc">{</span>output_path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-787"><a href="#cb37-787" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-788"><a href="#cb37-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-789"><a href="#cb37-789" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sampling Raster Values at Point Locations</span></span>
<span id="cb37-790"><a href="#cb37-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-791"><a href="#cb37-791" aria-hidden="true" tabindex="-1"></a>**Extract pixel values at specific coordinates:**</span>
<span id="cb37-792"><a href="#cb37-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-793"><a href="#cb37-793" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-794"><a href="#cb37-794" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Field survey locations</span></span>
<span id="cb37-795"><a href="#cb37-795" aria-hidden="true" tabindex="-1"></a>survey_points <span class="op">=</span> gpd.GeoDataFrame({</span>
<span id="cb37-796"><a href="#cb37-796" aria-hidden="true" tabindex="-1"></a>    <span class="st">'site_id'</span>: [<span class="st">'Site_A'</span>, <span class="st">'Site_B'</span>, <span class="st">'Site_C'</span>],</span>
<span id="cb37-797"><a href="#cb37-797" aria-hidden="true" tabindex="-1"></a>    <span class="st">'geometry'</span>: gpd.points_from_xy([<span class="fl">124.0</span>, <span class="fl">124.5</span>, <span class="fl">123.8</span>], [<span class="fl">10.0</span>, <span class="fl">10.3</span>, <span class="fl">9.8</span>])</span>
<span id="cb37-798"><a href="#cb37-798" aria-hidden="true" tabindex="-1"></a>}, crs<span class="op">=</span><span class="st">'EPSG:4326'</span>)</span>
<span id="cb37-799"><a href="#cb37-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-800"><a href="#cb37-800" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample raster at points</span></span>
<span id="cb37-801"><a href="#cb37-801" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-802"><a href="#cb37-802" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reproject points if needed</span></span>
<span id="cb37-803"><a href="#cb37-803" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> survey_points.crs <span class="op">!=</span> src.crs:</span>
<span id="cb37-804"><a href="#cb37-804" aria-hidden="true" tabindex="-1"></a>        survey_points <span class="op">=</span> survey_points.to_crs(src.crs)</span>
<span id="cb37-805"><a href="#cb37-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-806"><a href="#cb37-806" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract coordinates</span></span>
<span id="cb37-807"><a href="#cb37-807" aria-hidden="true" tabindex="-1"></a>    coords <span class="op">=</span> [(x, y) <span class="cf">for</span> x, y <span class="kw">in</span> <span class="bu">zip</span>(survey_points.geometry.x, survey_points.geometry.y)]</span>
<span id="cb37-808"><a href="#cb37-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-809"><a href="#cb37-809" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample all bands</span></span>
<span id="cb37-810"><a href="#cb37-810" aria-hidden="true" tabindex="-1"></a>    sampled_values <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> src.sample(coords)]</span>
<span id="cb37-811"><a href="#cb37-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-812"><a href="#cb37-812" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to GeoDataFrame</span></span>
<span id="cb37-813"><a href="#cb37-813" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'blue'</span>] <span class="op">=</span> [v[<span class="dv">0</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb37-814"><a href="#cb37-814" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'green'</span>] <span class="op">=</span> [v[<span class="dv">1</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb37-815"><a href="#cb37-815" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'red'</span>] <span class="op">=</span> [v[<span class="dv">2</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb37-816"><a href="#cb37-816" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'nir'</span>] <span class="op">=</span> [v[<span class="dv">3</span>] <span class="cf">for</span> v <span class="kw">in</span> sampled_values]</span>
<span id="cb37-817"><a href="#cb37-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-818"><a href="#cb37-818" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate NDVI at points</span></span>
<span id="cb37-819"><a href="#cb37-819" aria-hidden="true" tabindex="-1"></a>survey_points[<span class="st">'ndvi'</span>] <span class="op">=</span> (survey_points[<span class="st">'nir'</span>] <span class="op">-</span> survey_points[<span class="st">'red'</span>]) <span class="op">/</span> <span class="op">\</span></span>
<span id="cb37-820"><a href="#cb37-820" aria-hidden="true" tabindex="-1"></a>                        (survey_points[<span class="st">'nir'</span>] <span class="op">+</span> survey_points[<span class="st">'red'</span>])</span>
<span id="cb37-821"><a href="#cb37-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-822"><a href="#cb37-822" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(survey_points[[<span class="st">'site_id'</span>, <span class="st">'ndvi'</span>]])</span>
<span id="cb37-823"><a href="#cb37-823" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-824"><a href="#cb37-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-825"><a href="#cb37-825" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-826"><a href="#cb37-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-827"><a href="#cb37-827" aria-hidden="true" tabindex="-1"></a><span class="fu">## Part 7: Complete Workflow Example</span></span>
<span id="cb37-828"><a href="#cb37-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-829"><a href="#cb37-829" aria-hidden="true" tabindex="-1"></a><span class="fu">### Scenario: Forest Health Assessment in Philippine Protected Area</span></span>
<span id="cb37-830"><a href="#cb37-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-831"><a href="#cb37-831" aria-hidden="true" tabindex="-1"></a>**Goal:** Identify potential forest stress areas using Sentinel-2 NDVI</span>
<span id="cb37-832"><a href="#cb37-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-833"><a href="#cb37-833" aria-hidden="true" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb37-834"><a href="#cb37-834" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Load protected area boundary</span></span>
<span id="cb37-835"><a href="#cb37-835" aria-hidden="true" tabindex="-1"></a><span class="co"># (Replace with actual protected area shapefile)</span></span>
<span id="cb37-836"><a href="#cb37-836" aria-hidden="true" tabindex="-1"></a>protected_area <span class="op">=</span> aoi_gdf  <span class="co"># Using our AOI from earlier</span></span>
<span id="cb37-837"><a href="#cb37-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-838"><a href="#cb37-838" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Load Sentinel-2 imagery</span></span>
<span id="cb37-839"><a href="#cb37-839" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(raster_path) <span class="im">as</span> src:</span>
<span id="cb37-840"><a href="#cb37-840" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 3. Clip to protected area</span></span>
<span id="cb37-841"><a href="#cb37-841" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> protected_area.crs <span class="op">!=</span> src.crs:</span>
<span id="cb37-842"><a href="#cb37-842" aria-hidden="true" tabindex="-1"></a>        protected_area <span class="op">=</span> protected_area.to_crs(src.crs)</span>
<span id="cb37-843"><a href="#cb37-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-844"><a href="#cb37-844" aria-hidden="true" tabindex="-1"></a>    shapes <span class="op">=</span> protected_area.geometry.values</span>
<span id="cb37-845"><a href="#cb37-845" aria-hidden="true" tabindex="-1"></a>    out_image, out_transform <span class="op">=</span> mask(src, shapes, crop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-846"><a href="#cb37-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-847"><a href="#cb37-847" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract bands</span></span>
<span id="cb37-848"><a href="#cb37-848" aria-hidden="true" tabindex="-1"></a>    red <span class="op">=</span> out_image[<span class="dv">2</span>].astype(<span class="bu">float</span>)</span>
<span id="cb37-849"><a href="#cb37-849" aria-hidden="true" tabindex="-1"></a>    nir <span class="op">=</span> out_image[<span class="dv">3</span>].astype(<span class="bu">float</span>)</span>
<span id="cb37-850"><a href="#cb37-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-851"><a href="#cb37-851" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Calculate NDVI</span></span>
<span id="cb37-852"><a href="#cb37-852" aria-hidden="true" tabindex="-1"></a>ndvi <span class="op">=</span> (nir <span class="op">-</span> red) <span class="op">/</span> (nir <span class="op">+</span> red <span class="op">+</span> <span class="fl">1e-10</span>)</span>
<span id="cb37-853"><a href="#cb37-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-854"><a href="#cb37-854" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Identify stress areas (low NDVI where forest expected)</span></span>
<span id="cb37-855"><a href="#cb37-855" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumption: Protected area should be &gt;0.6 NDVI (healthy forest)</span></span>
<span id="cb37-856"><a href="#cb37-856" aria-hidden="true" tabindex="-1"></a>stress_threshold <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb37-857"><a href="#cb37-857" aria-hidden="true" tabindex="-1"></a>stress_mask <span class="op">=</span> (ndvi <span class="op">&lt;</span> stress_threshold) <span class="op">&amp;</span> (ndvi <span class="op">&gt;</span> <span class="fl">0.1</span>)  <span class="co"># Exclude water/bare</span></span>
<span id="cb37-858"><a href="#cb37-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-859"><a href="#cb37-859" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Visualize results</span></span>
<span id="cb37-860"><a href="#cb37-860" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">6</span>))</span>
<span id="cb37-861"><a href="#cb37-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-862"><a href="#cb37-862" aria-hidden="true" tabindex="-1"></a><span class="co"># True color</span></span>
<span id="cb37-863"><a href="#cb37-863" aria-hidden="true" tabindex="-1"></a>rgb_display <span class="op">=</span> np.stack([red, green, blue], axis<span class="op">=</span><span class="dv">2</span>) <span class="op">/</span> <span class="fl">10000.0</span></span>
<span id="cb37-864"><a href="#cb37-864" aria-hidden="true" tabindex="-1"></a>rgb_display <span class="op">=</span> np.clip(rgb_display, <span class="dv">0</span>, <span class="fl">0.3</span>) <span class="op">/</span> <span class="fl">0.3</span>  <span class="co"># Contrast stretch</span></span>
<span id="cb37-865"><a href="#cb37-865" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].imshow(rgb_display)</span>
<span id="cb37-866"><a href="#cb37-866" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"True Color"</span>)</span>
<span id="cb37-867"><a href="#cb37-867" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb37-868"><a href="#cb37-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-869"><a href="#cb37-869" aria-hidden="true" tabindex="-1"></a><span class="co"># NDVI</span></span>
<span id="cb37-870"><a href="#cb37-870" aria-hidden="true" tabindex="-1"></a>im1 <span class="op">=</span> axes[<span class="dv">1</span>].imshow(ndvi, cmap<span class="op">=</span><span class="st">'RdYlGn'</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-871"><a href="#cb37-871" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"NDVI"</span>)</span>
<span id="cb37-872"><a href="#cb37-872" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb37-873"><a href="#cb37-873" aria-hidden="true" tabindex="-1"></a>plt.colorbar(im1, ax<span class="op">=</span>axes[<span class="dv">1</span>], shrink<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb37-874"><a href="#cb37-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-875"><a href="#cb37-875" aria-hidden="true" tabindex="-1"></a><span class="co"># Stress areas</span></span>
<span id="cb37-876"><a href="#cb37-876" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].imshow(stress_mask, cmap<span class="op">=</span><span class="st">'Reds'</span>)</span>
<span id="cb37-877"><a href="#cb37-877" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="ss">f"Potential Stress Areas (NDVI &lt; </span><span class="sc">{</span>stress_threshold<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb37-878"><a href="#cb37-878" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb37-879"><a href="#cb37-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-880"><a href="#cb37-880" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb37-881"><a href="#cb37-881" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb37-882"><a href="#cb37-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-883"><a href="#cb37-883" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Statistics</span></span>
<span id="cb37-884"><a href="#cb37-884" aria-hidden="true" tabindex="-1"></a>total_pixels <span class="op">=</span> ndvi.size</span>
<span id="cb37-885"><a href="#cb37-885" aria-hidden="true" tabindex="-1"></a>stress_pixels <span class="op">=</span> stress_mask.<span class="bu">sum</span>()</span>
<span id="cb37-886"><a href="#cb37-886" aria-hidden="true" tabindex="-1"></a>area_m2 <span class="op">=</span> stress_pixels <span class="op">*</span> <span class="dv">100</span>  <span class="co"># 10m resolution → 100 m² per pixel</span></span>
<span id="cb37-887"><a href="#cb37-887" aria-hidden="true" tabindex="-1"></a>area_ha <span class="op">=</span> area_m2 <span class="op">/</span> <span class="dv">10000</span></span>
<span id="cb37-888"><a href="#cb37-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-889"><a href="#cb37-889" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb37-890"><a href="#cb37-890" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"FOREST HEALTH ASSESSMENT RESULTS"</span>)</span>
<span id="cb37-891"><a href="#cb37-891" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb37-892"><a href="#cb37-892" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Protected Area: </span><span class="sc">{</span>protected_area[<span class="st">'id'</span>]<span class="sc">.</span>values[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb37-893"><a href="#cb37-893" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average NDVI: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb37-894"><a href="#cb37-894" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress pixels: </span><span class="sc">{</span>stress_pixels<span class="sc">:,}</span><span class="ss"> (</span><span class="sc">{</span>stress_pixels<span class="op">/</span>total_pixels<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb37-895"><a href="#cb37-895" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Stress area: </span><span class="sc">{</span>area_ha<span class="sc">:.1f}</span><span class="ss"> hectares"</span>)</span>
<span id="cb37-896"><a href="#cb37-896" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb37-897"><a href="#cb37-897" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb37-898"><a href="#cb37-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-899"><a href="#cb37-899" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-900"><a href="#cb37-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-901"><a href="#cb37-901" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Takeaways</span></span>
<span id="cb37-902"><a href="#cb37-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-903"><a href="#cb37-903" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb37-904"><a href="#cb37-904" aria-hidden="true" tabindex="-1"></a><span class="fu">## Session 3 Summary</span></span>
<span id="cb37-905"><a href="#cb37-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-906"><a href="#cb37-906" aria-hidden="true" tabindex="-1"></a>**Google Colab:**</span>
<span id="cb37-907"><a href="#cb37-907" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Cloud-based Python environment, no installation needed</span>
<span id="cb37-908"><a href="#cb37-908" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Mount Google Drive for data access</span>
<span id="cb37-909"><a href="#cb37-909" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install geospatial libraries: <span class="in">`!pip install geopandas rasterio`</span></span>
<span id="cb37-910"><a href="#cb37-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-911"><a href="#cb37-911" aria-hidden="true" tabindex="-1"></a>**GeoPandas (Vector Data):**</span>
<span id="cb37-912"><a href="#cb37-912" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Read shapefiles/GeoJSON: <span class="in">`gpd.read_file()`</span></span>
<span id="cb37-913"><a href="#cb37-913" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Filter by attributes: <span class="in">`gdf[gdf['column'] == value]`</span></span>
<span id="cb37-914"><a href="#cb37-914" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Visualize: <span class="in">`gdf.plot()`</span></span>
<span id="cb37-915"><a href="#cb37-915" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check/transform CRS: <span class="in">`gdf.crs`</span>, <span class="in">`gdf.to_crs()`</span></span>
<span id="cb37-916"><a href="#cb37-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-917"><a href="#cb37-917" aria-hidden="true" tabindex="-1"></a>**Rasterio (Raster Data):**</span>
<span id="cb37-918"><a href="#cb37-918" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Open rasters: <span class="in">`rasterio.open(path)`</span></span>
<span id="cb37-919"><a href="#cb37-919" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Read bands: <span class="in">`src.read(band_number)`</span></span>
<span id="cb37-920"><a href="#cb37-920" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Arrays are NumPy: all array operations work</span>
<span id="cb37-921"><a href="#cb37-921" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Calculate indices: NDVI = <span class="in">`(NIR - Red) / (NIR + Red)`</span></span>
<span id="cb37-922"><a href="#cb37-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-923"><a href="#cb37-923" aria-hidden="true" tabindex="-1"></a>**Combining Vector + Raster:**</span>
<span id="cb37-924"><a href="#cb37-924" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Clip rasters: <span class="in">`rasterio.mask.mask(src, shapes, crop=True)`</span></span>
<span id="cb37-925"><a href="#cb37-925" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Sample at points: <span class="in">`src.sample(coordinates)`</span></span>
<span id="cb37-926"><a href="#cb37-926" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Match CRS before spatial operations!</span>
<span id="cb37-927"><a href="#cb37-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-928"><a href="#cb37-928" aria-hidden="true" tabindex="-1"></a>**Next:** Session 4 will leverage Google Earth Engine to access petabytes of Sentinel data without downloading!</span>
<span id="cb37-929"><a href="#cb37-929" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-930"><a href="#cb37-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-931"><a href="#cb37-931" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-932"><a href="#cb37-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-933"><a href="#cb37-933" aria-hidden="true" tabindex="-1"></a><span class="fu">## Practice Exercises</span></span>
<span id="cb37-934"><a href="#cb37-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-935"><a href="#cb37-935" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb37-936"><a href="#cb37-936" aria-hidden="true" tabindex="-1"></a><span class="fu">## Try These Challenges</span></span>
<span id="cb37-937"><a href="#cb37-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-938"><a href="#cb37-938" aria-hidden="true" tabindex="-1"></a>**Exercise 1: Load Your Own Boundary**</span>
<span id="cb37-939"><a href="#cb37-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-940"><a href="#cb37-940" aria-hidden="true" tabindex="-1"></a>Download a shapefile of your province from NAMRIA Geoportal and visualize it in Colab.</span>
<span id="cb37-941"><a href="#cb37-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-942"><a href="#cb37-942" aria-hidden="true" tabindex="-1"></a>**Exercise 2: Calculate NDWI**</span>
<span id="cb37-943"><a href="#cb37-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-944"><a href="#cb37-944" aria-hidden="true" tabindex="-1"></a>Modify the NDVI code to calculate NDWI and identify water bodies in the imagery.</span>
<span id="cb37-945"><a href="#cb37-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-946"><a href="#cb37-946" aria-hidden="true" tabindex="-1"></a>**Exercise 3: Multi-temporal NDVI**</span>
<span id="cb37-947"><a href="#cb37-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-948"><a href="#cb37-948" aria-hidden="true" tabindex="-1"></a>If you have two Sentinel-2 images (dry season, wet season), calculate NDVI for both and create a change map.</span>
<span id="cb37-949"><a href="#cb37-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-950"><a href="#cb37-950" aria-hidden="true" tabindex="-1"></a>**Exercise 4: Zonal Statistics**</span>
<span id="cb37-951"><a href="#cb37-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-952"><a href="#cb37-952" aria-hidden="true" tabindex="-1"></a>Calculate average NDVI for each municipality using <span class="in">`rasterstats`</span> library.</span>
<span id="cb37-953"><a href="#cb37-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-954"><a href="#cb37-954" aria-hidden="true" tabindex="-1"></a>**Bonus: RGB Composite from GEE Export**</span>
<span id="cb37-955"><a href="#cb37-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-956"><a href="#cb37-956" aria-hidden="true" tabindex="-1"></a>Export a Sentinel-2 composite from Google Earth Engine (Session 4) and visualize it using today's techniques!</span>
<span id="cb37-957"><a href="#cb37-957" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-958"><a href="#cb37-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-959"><a href="#cb37-959" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-960"><a href="#cb37-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-961"><a href="#cb37-961" aria-hidden="true" tabindex="-1"></a><span class="fu">## Further Reading</span></span>
<span id="cb37-962"><a href="#cb37-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-963"><a href="#cb37-963" aria-hidden="true" tabindex="-1"></a><span class="fu">### GeoPandas</span></span>
<span id="cb37-964"><a href="#cb37-964" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Official Documentation</span><span class="co">](https://geopandas.org/)</span></span>
<span id="cb37-965"><a href="#cb37-965" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">GeoPandas Tutorial (DataCamp)</span><span class="co">](https://www.datacamp.com/tutorial/geopandas-tutorial-geospatial-analysis)</span></span>
<span id="cb37-966"><a href="#cb37-966" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">GeoPandas Examples Gallery</span><span class="co">](https://geopandas.org/en/stable/gallery/index.html)</span></span>
<span id="cb37-967"><a href="#cb37-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-968"><a href="#cb37-968" aria-hidden="true" tabindex="-1"></a><span class="fu">### Rasterio</span></span>
<span id="cb37-969"><a href="#cb37-969" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Official Documentation</span><span class="co">](https://rasterio.readthedocs.io/)</span></span>
<span id="cb37-970"><a href="#cb37-970" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Rasterio Quickstart</span><span class="co">](https://rasterio.readthedocs.io/en/stable/quickstart.html)</span></span>
<span id="cb37-971"><a href="#cb37-971" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Python Raster Tutorial (WUR)</span><span class="co">](https://geoscripting-wur.github.io/PythonRaster/)</span></span>
<span id="cb37-972"><a href="#cb37-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-973"><a href="#cb37-973" aria-hidden="true" tabindex="-1"></a><span class="fu">### Combined Workflows</span></span>
<span id="cb37-974"><a href="#cb37-974" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Carpentries Geospatial Python</span><span class="co">](https://carpentries-incubator.github.io/geospatial-python/)</span></span>
<span id="cb37-975"><a href="#cb37-975" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Cropping Rasters with Vector Boundaries</span><span class="co">](https://rasterio.readthedocs.io/en/stable/topics/masking-by-shapefile.html)</span></span>
<span id="cb37-976"><a href="#cb37-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-977"><a href="#cb37-977" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-978"><a href="#cb37-978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-979"><a href="#cb37-979" aria-hidden="true" tabindex="-1"></a><span class="fu">## Jupyter Notebook</span></span>
<span id="cb37-980"><a href="#cb37-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-981"><a href="#cb37-981" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb37-982"><a href="#cb37-982" aria-hidden="true" tabindex="-1"></a><span class="fu">## Access the Interactive Notebook</span></span>
<span id="cb37-983"><a href="#cb37-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-984"><a href="#cb37-984" aria-hidden="true" tabindex="-1"></a>A complete Jupyter notebook with all code examples from this session is available:</span>
<span id="cb37-985"><a href="#cb37-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-986"><a href="#cb37-986" aria-hidden="true" tabindex="-1"></a>**[Open Notebook 1: Python Geospatial Data →](../notebooks/notebook1.qmd)**</span>
<span id="cb37-987"><a href="#cb37-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-988"><a href="#cb37-988" aria-hidden="true" tabindex="-1"></a>This notebook includes:</span>
<span id="cb37-989"><a href="#cb37-989" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>All code examples ready to run</span>
<span id="cb37-990"><a href="#cb37-990" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Additional exercises</span>
<span id="cb37-991"><a href="#cb37-991" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Sample datasets</span>
<span id="cb37-992"><a href="#cb37-992" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Detailed comments and explanations</span>
<span id="cb37-993"><a href="#cb37-993" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-994"><a href="#cb37-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-995"><a href="#cb37-995" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb37-996"><a href="#cb37-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-997"><a href="#cb37-997" aria-hidden="true" tabindex="-1"></a>::: {.session-nav}</span>
<span id="cb37-998"><a href="#cb37-998" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-link href="session2.qmd"}</span>
<span id="cb37-999"><a href="#cb37-999" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-label}</span>
<span id="cb37-1000"><a href="#cb37-1000" aria-hidden="true" tabindex="-1"></a>← Previous</span>
<span id="cb37-1001"><a href="#cb37-1001" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1002"><a href="#cb37-1002" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-title}</span>
<span id="cb37-1003"><a href="#cb37-1003" aria-hidden="true" tabindex="-1"></a>Session 2: AI/ML Fundamentals</span>
<span id="cb37-1004"><a href="#cb37-1004" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1005"><a href="#cb37-1005" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1006"><a href="#cb37-1006" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-link href="session4.qmd"}</span>
<span id="cb37-1007"><a href="#cb37-1007" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-label}</span>
<span id="cb37-1008"><a href="#cb37-1008" aria-hidden="true" tabindex="-1"></a>Next Session</span>
<span id="cb37-1009"><a href="#cb37-1009" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1010"><a href="#cb37-1010" aria-hidden="true" tabindex="-1"></a>::: {.session-nav-title}</span>
<span id="cb37-1011"><a href="#cb37-1011" aria-hidden="true" tabindex="-1"></a>Session 4: Google Earth Engine →</span>
<span id="cb37-1012"><a href="#cb37-1012" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1013"><a href="#cb37-1013" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb37-1014"><a href="#cb37-1014" aria-hidden="true" tabindex="-1"></a>:::</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>CopPhil EO AI/ML Training Programme</p>
</div>   
    <div class="nav-footer-center">
<p>Funded by the European Union - Global Gateway Initiative</p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:info@philsa.gov.ph">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://philsa.gov.ph">
      <i class="bi bi-globe" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>