{"title":"Learning Objectives","markdown":{"headingText":"Learning Objectives","containsRefs":false,"markdown":"\nBy the end of this session, you will be able to:\n\n*   **Access and filter** Sentinel-1 and Sentinel-2 image collections in Google Earth Engine.\n*   **Apply** a cloud mask to Sentinel-2 imagery.\n*   **Create** a cloud-free composite image.\n*   **Export** processed imagery from Google Earth Engine.\n\n### 4.1. Hands-on Google Colab Notebooks\n\n#### Notebook 2: **Google Earth Engine Python API for EO Data**\n\n**Objective:** Teach participants how to use the Earth Engine Python API\nin Colab to find, filter, process, and download satellite images\n(Sentinel-1 and Sentinel-2) with basic pre-processing like cloud masking\nand compositing.\n\n**Contents & Steps:**\n\n- **Earth Engine Initialization:** The notebook starts with:\n\n<!-- -->\n\n- !pip install earthengine-api\n      import ee\n      ee.Authenticate()\n      ee.Initialize()\n\n  With instructions (in markdown) about the authentication process\n  (click link, get code, paste). After initialization, they are ready to\n  call EE functions.\n\n<!-- -->\n\n- **Defining an Area of Interest (AOI):** The notebook provides a sample\n  AOI, for example a rectangle over a part of Luzon or a specific city.\n  Possibly:\n\n<!-- -->\n\n- aoi = ee.Geometry.Rectangle([120.9, 14.5, 121.1, 14.7])  # bounding box around Metro Manila\n\n  or use a FeatureCollection like\n  `ee.FeatureCollection(\"USDOS/LSIB_SIMPLE/2017\")` filtered for\n  Philippines for a country boundary -- but a smaller AOI is better for\n  quick results.\n\n<!-- -->\n\n- **Searching Sentinel-2 ImageCollection:** They then create a\n  Sentinel-2 ImageCollection query:\n\n<!-- -->\n\n- s2_col = ee.ImageCollection('COPERNICUS/S2_SR') \\\n                 .filterBounds(aoi) \\\n                 .filterDate('2021-06-01', '2021-08-31') \\\n                 .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 50))\n      print(\"Images count:\", s2_col.size().getInfo())\n\n  The markdown explains each filter. They then select only relevant\n  bands (maybe all 12 reflectance bands except QA, or just the\n  visible/NIR for simplicity) using `.select([...])`.\n\n<!-- -->\n\n- **Cloud Mask Function:** Introduce a function to mask clouds in\n  Sentinel-2:\n\n<!-- -->\n\n- def mask_clouds(image):\n          qa = image.select('QA60')\n          # Bits 10 and 11 are clouds and cirrus\n          cloud_bit_mask = (1 << 10) | (1 << 11)\n          mask = qa.bitwiseAnd(cloud_bit_mask).eq(0)\n          return image.updateMask(mask)\n\n  Then apply: `s2_clean = s2_col.map(mask_clouds)`. A short explanation:\n  *\"The QA60 band's bits 10 and 11 indicate cloudy pixels; this mask\n  retains only pixels where those bits are 0 (no cloud).\"*\n\n<!-- -->\n\n- **Create a Median Composite:**\n\n<!-- -->\n\n- median_img = s2_clean.median().clip(aoi)\n\n  The notebook notes this takes the per-pixel median across the\n  collection date range, yielding one cloud-free image. They then\n  visualize or download this composite:\n\n<!-- -->\n\n- **Visualization in Colab:** Perhaps use folium via geemap (if\n  introduced) or get a thumbnail:\n\n<!-- -->\n\n- url = median_img.getThumbURL({'region': aoi, 'min':0, 'max':3000, 'bands':['B4','B3','B2']})\n      from IPython.display import Image\n      Image(url=url)\n\n  This should display a small true-color thumbnail of the composite. The\n  markdown might show the output or instruct users to open it.\n\n<!-- -->\n\n- **Downloading the Composite:** Show how to export the image to Google\n  Drive:\n\n<!-- -->\n\n- export_task = ee.batch.Export.image.toDrive(**{\n          'image': median_img,\n          'description': 'Sentinel2_composite_JunAug2021',\n          'folder': 'CopPhilTraining',\n          'fileNamePrefix': 'S2Composite_Manila_2021',\n          'region': aoi.getInfo()['coordinates'],\n          'scale': 10,\n          'crs': 'EPSG:4326'\n      })\n      export_task.start()\n\n  Explain that this will save the image in their Drive (the user will\n  have to manually download from Drive). Mention that tasks take a few\n  minutes; they can check status with `export_task.status()` or in the\n  GEE web UI. (Since it's a small region and median, it might finish\n  quickly).\n\n<!-- -->\n\n- **Sentinel-1 Example:** The notebook then goes through a similar flow\n  for Sentinel-1:\n\n<!-- -->\n\n- s1_col = ee.ImageCollection('COPERNICUS/S1_GRD') \\\n                 .filterBounds(aoi) \\\n                 .filterDate('2021-06-01', '2021-06-30') \\\n                 .filter(ee.Filter.eq('instrumentMode', 'IW')) \\\n                 .filter(ee.Filter.eq('orbitProperties_pass', 'DESCENDING')) \\\n                 .filter(ee.Filter.eq('resolution_meters', 10)) \\\n                 .filter(ee.Filter.listContains('transmitterReceiverPolarisation', 'VV'))\n      print(\"Sentinel-1 count:\", s1_col.size().getInfo())\n\n  This filters June 2021, IW mode, descending orbit, VV polarization\n  only. The notebook explains these filters (mention dual polarization\n  is often VV+VH; here we take only VV for demonstration). They then\n  take a mean or median:\n\n      s1_img = s1_col.mean().clip(aoi)\n\n  Because SAR has speckle, averaging multiple scenes can reduce noise.\n  They then visualize:\n\n      url = s1_img.getThumbURL({'region': aoi, 'min': -20, 'max': 0})\n      Image(url=url)\n\n  where -20 to 0 dB might be typical backscatter range. The resulting\n  grayscale image shows SAR backscatter over the area.\n\nIf time permits, show how to apply a simple threshold or edge detection\non SAR (not necessary, but for fun: e.g., water has low VV backscatter,\nso threshold at -15 dB could highlight water -- but perhaps beyond\nscope).\n\n- **Downloading Sentinel-1 data:** They could demonstrate how to use\n  `ee.batch.Export.image.toDrive` similarly for the SAR composite. Or\n  mention using the ASF DAAC for raw data but that's outside of GEE.\n\n- **Using Earth Engine Data Catalog:** Show that one can search for\n  datasets programmatically. Perhaps:\n\n<!-- -->\n\n- ee_catalog = ee.data.getList({'id': 'COPERNICUS'})  # fetch info on Copernicus datasets\n      for entry in ee_catalog:\n          print(entry['id'])\n\n  This might print available dataset IDs. Or encourage them to use the\n  Docs tab in the Code Editor or the online catalog. The idea is to make\n  participants aware of the huge variety of data (Landsat, MODIS, etc.)\n  beyond Sentinel.\n\n<!-- -->\n\n- **Additional GEE functionalities:** Briefly mention that GEE can do a\n  lot more:\n\n- Compute statistics: e.g.,\n  `median_img.reduceRegion(ee.Reducer.mean(), aoi, scale=10)` to get\n  mean reflectance over AOI.\n\n- Time series: one can chart NDVI over time by iterating or using\n  `reduceRegions`.\n\n- Machine learning: Earth Engine also offers some built-in ML (Cart,\n  SVM, randomForest via `ee.Classifier`) which they might use on Day 2.\n  The notebook might not delve deep into these, but perhaps includes one\n  example of a reduceRegion or adding NDVI band:\n\n<!-- -->\n\n- ndvi_img = median_img.normalizedDifference(['B8','B4']).rename('NDVI')\n\n  and visualizing NDVI.","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"wrap","code-link":true,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":true,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["include-code-files"],"css":["../styles/custom.css"],"toc":true,"toc-depth":3,"number-sections":false,"output-file":"session4.html"},"language":{"toc-title-document":"Contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Instructor","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Date","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","comments":{"hypothesis":false,"utterances":{"repo":"copphil-training/day1"}},"theme":{"light":["cosmo","../styles/custom.scss"],"dark":["darkly","../styles/custom.scss"]},"toc-expand":2,"toc-title":"On This Page","code-copy":true,"smooth-scroll":true,"anchor-sections":true,"fig-cap-location":"bottom","tbl-cap-location":"top","citations-hover":true,"footnotes-hover":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}